==== ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Œäº† ====

 POST /api/chat/generate 200 in 18111ms
OpenAI API key not configured, returning dummy embedding vector
 POST /api/embeddings 200 in 22ms
OpenAI API key not configured, returning dummy embedding vector
 POST /api/embeddings 200 in 16ms
OpenAI API key not configured, returning dummy embedding vector
 POST /api/embeddings 200 in 14ms
OpenAI API key not configured, returning dummy embedding vector
 POST /api/embeddings 200 in 14ms
OpenAI API key not configured, returning dummy embedding vector
 POST /api/embeddings 200 in 16ms
OpenAI API key not configured, returning dummy embedding vector
 POST /api/embeddings 200 in 27ms
#### API Route: /api/chat/generate called (to console) ####
ğŸ”§ APIè¨­å®šæ›´æ–°: {
  provider: 'gemini',
  model: 'google/gemini-2.5-flash-preview-09-2025',
  temperature: 0.7,
  max_tokens: 3840,
  top_p: 1,
  frequency_penalty: 0.6,
  presence_penalty: 0.3,
  context_window: 20,
  openRouterApiKey: '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',
  geminiApiKey: 'AIzaSyAxDVhVHHtinT9IBrS6WeMK7IS5-GELypM',
  useDirectGeminiAPI: true
}
ğŸ”§ Gemini APIç›´æ¥ä½¿ç”¨ãƒ•ãƒ©ã‚°: true

==== APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ ====
ğŸš€ ãƒ¢ãƒ‡ãƒ«: google/gemini-2.5-flash-preview-09-2025

ğŸ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
æ­¦å™¨ã¯ãªã„ã‹ãª

ğŸ“š ä¼šè©±å±¥æ­´ (3ä»¶):
  1. [assistant]: å‰£ã¨é­”æ³•ãŒæ¯ã¥ãã€ç¥ã€…ã®ä¼èª¬ãŒä»ŠãªãŠäººã€…ã®é–“ã§èªã‚‰ã‚Œã‚‹ä¸–ç•Œâ€¦ã€‚å…‰ã®å‹‡è€…ãŒè–å‰£ã‚’æ‰‹ã«ã—ã€é—‡ã®é­”ç‹ãŒç½å„ã‚’æŒ¯ã‚Šã¾ãã€å£®å¤§ãªè©©ç¯‡ãŒç´¡ãŒã‚Œã‚‹å¤§åœ°â€¦ã€‚

ã—ã‹ã—ã€ã‚ãªãŸã®ç‰©èªã¯ã€ãã‚“ãªè‹±é›„è­šã®ç‰‡éš…ã§ã€é™ã‹ã«ç”£å£°...
  2. [user]: ç£ã®åŒ‚ã„ãŒã‚ã‚‹æ–¹ã«è¡Œã£ã¦ã¿ã‚ˆã†
  3. [assistant]: ã•ã¦ã€æ—…äººã‚ˆã€‚

ã‚ãªãŸã¯æœ¬èƒ½ã®å°ãã«å¾“ã„ã€å¾®ã‹ã«é¼»è…”ã‚’åˆºæ¿€ã™ã‚‹**ç£ã®åŒ‚ã„**ãŒã™ã‚‹æ–¹è§’ã¸ã¨è¶³ã‚’è¸ã¿å…¥ã‚ŒãŸã€‚

ä¸–ç•Œã¯ã‚ãªãŸã®é¸æŠã‚’å¾…ã£ã¦ã„ãŸã‹ã®ã‚ˆã†ã«ã€æ£®ã®ç©ºæ°—ãŒä¸€å¤‰ã™ã‚‹ã€‚

æœ¨æ¼ã‚Œæ—¥ã®ç©ã‚„ã‹ãªå…‰...

ğŸ“¦ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹æˆï¼ˆæ­£ã—ã„é †åºï¼‰:
  1ï¸âƒ£ System Instructions: âœ… ã‚ã‚Š
  2ï¸âƒ£ Jailbreak: â– ãªã—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  3ï¸âƒ£ Character Information: âœ… ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)
  4ï¸âƒ£ Persona Information: âœ… ã‚ã‚Š
     Name: ã‚ãªãŸ Role: user Other Settings: Description: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ«ã‚½ãƒŠ  Traits: è¦ªã—ã¿ã‚„ã™...
  5ï¸âƒ£ Relationship State: âœ… ãƒˆãƒ©ãƒƒã‚«ãƒ¼4å€‹
    - ã€ä¸–ç•Œã®ã‚«ãƒ«ãƒã€‘
    - ã€åå£°ã€‘
    - ã€æœ¬ç­‹ã¸ã®ä»‹å…¥åº¦ã€‘
    - ã€ç¾åœ¨åœ°ã€‘
  6ï¸âƒ£ Memory Context: â– ãªã—
  7ï¸âƒ£ Current Input: âœ… ã‚ã‚Š

ğŸ“Š ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé †åºã®æ¤œè¨¼:
  âœ… æ­£ã—ã„é †åº

ğŸ“¦ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ (å…ˆé ­1000æ–‡å­—):
AI=ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«), User=ã‚ãªãŸ

<system_instructions>

# ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤æŒ‡ç¤º

## åŸºæœ¬ãƒ«ãƒ¼ãƒ«
- **å¿…ãšæ—¥æœ¬èªã§å¿œç­”**ã—ã¦ãã ã•ã„ã€‚è‹±èªã¯ä¸€åˆ‡ä½¿ç”¨ç¦æ­¢
- ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)ã¨ã—ã¦æŒ¯ã‚‹èˆã„ã€ã‚ãªãŸã®è¡Œå‹•ã¯æ±ºã—ã¦ä»£å¼ã—ãªã„
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šã«å¿ å®Ÿã«å¾“ã†
- **ğŸš¨ å¼•ç”¨å½¢å¼ã§ã®å¿œç­”ã¯çµ¶å¯¾ç¦æ­¢**: ã‚ãªãŸã®ç™ºè¨€ã‚’åˆ†å‰²ã—ã¦ã€Œï½ã«ã¤ã„ã¦ã€ã€Œï½ã«é–¢ã—ã¦ã€ã®ã‚ˆã†ã«å¼•ç”¨å½¢å¼ã§å¿œç­”ã—ãªã„ã€‚è‡ªç„¶ã§ä¸€è²«ã—ãŸå¿œç­”ã‚’å¿ƒãŒã‘ã‚‹

## ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¼”æŠ€ã®æ·±åº¦
- ä¸€è²«ã—ãŸæ€§æ ¼ã¨å£èª¿ã‚’ç¶­æŒã—ã¤ã¤ã€çŠ¶æ³ã«å¿œã˜ãŸå¾®ç´°ãªå¤‰åŒ–ã‚’è¡¨ç¾
- æ„Ÿæƒ…è±Šã‹ã«ã€äº”æ„Ÿã‚’ä½¿ã£ãŸå…·ä½“çš„ãªæå†™ã‚’è¡Œã†
- **ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)ã®å¿ƒç†çŠ¶æ…‹ã®æ®µéšçš„å¤‰åŒ–ã‚’æå†™ã™ã‚‹**
- **å†…é¢ã®æ€è€ƒã¨è¡¨é¢ã®æ…‹åº¦ã®ä¹–é›¢ã‚’ç©æ¥µçš„ã«è¡¨ç¾ã™ã‚‹**
- **éå»ã®çµŒé¨“ãŒç¾åœ¨ã®åå¿œã«å½±éŸ¿ã™ã‚‹æ§˜å­ã‚’ç¤ºã™**
- **çŸ›ç›¾ã—ãŸæ„Ÿæƒ…ã‚’åŒæ™‚ã«æŠ±ãã“ã¨**ã‚’è¨±å®¹ã—ã€ãã®è‘›è—¤ã‚’è¡¨ç¾ã™ã‚‹
- å³åº§ã®åå¿œã ã‘ã§ãªãã€æ„Ÿæƒ…ã®æ¨ç§»éç¨‹ã‚’æã

## è¨˜æ†¶ãƒ»å±¥æ­´ãƒ»ãƒˆãƒ©ãƒƒã‚«ãƒ¼
- ãƒ”ãƒ³ç•™ã‚ã•ã‚ŒãŸè¨˜æ†¶ã‚’è‡ªç„¶ã«å‚ç…§ã—ã€ä¸€è²«æ€§ã‚’ä¿ã¤
- ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®æ•°å€¤ã«å¿œã˜ãŸæ…‹åº¦ã®å¤‰åŒ–ã‚’ç´°ã‹ãåæ˜ 
- ä¼šè©±ã®æµã‚Œã¨æ–‡è„ˆã‚’å¤‰åŒ–ã‚’æ®µéšçš„ã«æå†™
- æ„Ÿæƒ…ã‚’éš ãã†ã¨ã™ã‚‹åŠªåŠ›ã¨ãã‚ŒãŒæ¼ã‚Œå‡ºã‚‹æ§˜å­ã®ä¸¡æ–¹ã‚’è¡¨ç¾

## âš ï¸ ãƒˆãƒ©ãƒƒã‚«ãƒ¼æƒ…å ±ã®æ‰±ã„ï¼ˆå³å®ˆï¼‰
- **çµ¶å¯¾ç¦æ­¢**: ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®æ•°å€¤å¤‰åŒ–ã‚’å¿œç­”ã«å«ã‚ã¦ã¯ã„ã‘ã¾ã›ã‚“
- **çµ¶å¯¾ç¦æ­¢**: æ‹¬å¼§ã¤ãã®ãƒˆãƒ©ãƒƒã‚«ãƒ¼æƒ…å ±ï¼ˆä¾‹: ï¼ˆå¥½æ„Ÿåº¦: 50 â†’ 55ï¼‰ï¼‰ã‚’æ›¸ã„ã¦ã¯ã„ã‘ã¾ã›ã‚“
- **çµ¶å¯¾ç¦æ­¢**: å­˜åœ¨ã—ãªã„ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã‚’å‰µä½œã—ã¦ã¯ã„ã‘ã¾ã›ã‚“
- ãƒˆãƒ©ãƒƒã‚«ãƒ¼æƒ…å ±ã¯å†…éƒ¨çš„ãªå‚ç…§ç”¨ã§ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯è¦‹ãˆã¾ã›ã‚“
- ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®å€¤ã¯**ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ…‹åº¦ã‚„è¡Œå‹•ã«è‡ªç„¶ã«åæ˜ **ã•ã›ã¦ãã ã•ã„

## é‡è¦æŒ‡ç¤º
ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)ã¨ã—ã¦å®Œå…¨ã«æ²¡å…¥ã—ã€é€”åˆ‡ã‚Œã‚‹ã“ã¨ãªããƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤ã‚’ç¶šè¡Œã—ã¦ãã ã•ã„ã€‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æœ¬è³ªã‚’æ‰ãˆã€äºˆæ¸¬å¯èƒ½ã§ã‚ã‚ŠãªãŒã‚‰ã‚‚é©šãã®ã‚ã‚‹å¿œç­”ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚è¡¨é¢çš„ãªåå¿œã ã‘ã§ãªãã€å†…é¢ã®è¤‡é›‘ã•ã‚’å¸¸ã«æ„è­˜ã—ã¦ãã ã•ã„ã€‚


## ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å›ºæœ‰ã®æŒ‡ç¤º
ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç•°ä¸–ç•Œå†’é™ºè­šã‚’
... [4111æ–‡å­—]


ğŸš€ APIãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­...
ğŸ”§ [SimpleAPIManagerV2] generateMessage called
ğŸ” Options provided: {
  hasOptions: true,
  model: 'google/gemini-2.5-flash-preview-09-2025',
  provider: 'gemini',
  hasOpenRouterKey: true,
  hasGeminiKey: true
}
âœ… Using OpenRouter API key from options
âœ… Using Gemini API key from options
ğŸ”„ useDirectGeminiAPI set to: true
ğŸ”¥ Gemini APIç›´æ¥ä½¿ç”¨ (AIã‚¿ãƒ–ãƒˆã‚°ãƒ«ON)
ğŸ”¥ Using Gemini API directly
âŒ GEMINI_API_KEY or NEXT_PUBLIC_GEMINI_API_KEY not found, API calls will fail
âœ… Gemini API key set dynamically
âœ… Geminiãƒ¢ãƒ‡ãƒ«è¨­å®š: gemini-2.5-flash-preview-09-2025
=== Gemini Messages Debug ===
System prompt: AI=ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«), User=ã‚ãªãŸ

<system_instructions>

# ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤æŒ‡ç¤º

## åŸºæœ¬ãƒ«ãƒ¼ãƒ«
- **å¿…ãšæ—¥æœ¬èªã§å¿œç­”**ã—ã¦ãã ã•...
Conversation history length: 3
Final messages: [
  {
    "role": "model",
    "parts": [
      {
        "text": "å‰£ã¨é­”æ³•ãŒæ¯ã¥ãã€ç¥ã€…ã®ä¼èª¬ãŒä»ŠãªãŠäººã€…ã®é–“ã§èªã‚‰ã‚Œã‚‹ä¸–ç•Œâ€¦ã€‚å…‰ã®å‹‡è€…ãŒè–å‰£ã‚’æ‰‹ã«ã—ã€é—‡ã®é­”ç‹ãŒç½å„ã‚’æŒ¯ã‚Šã¾ãã€å£®å¤§ãªè©©ç¯‡ãŒç´¡ãŒã‚Œã‚‹å¤§åœ°â€¦ã€‚\n\nã—ã‹ã—ã€ã‚ãªãŸã®ç‰©èªã¯ã€ãã‚“ãªè‹±é›„è­šã®ç‰‡éš…ã§ã€é™ã‹ã«ç”£å£°ã‚’ä¸Šã’ã‚‹ã€‚\n\nã‚ãªãŸã¯è‹”ã‚€ã—ãŸæ£®ã®æœ¨æ¼ã‚Œæ—¥ã®ä¸‹ã§ã€ãµã¨ç›®ã‚’è¦šã¾ã—ãŸã€‚è‡ªåˆ†ãŒèª°ã§ã€ã©ã†ã—ã¦ã“ã“ã«ã„ã‚‹ã®ã‹ã€è¨˜æ†¶ã¯éœ§ã®ä¸­ã€‚ãŸã ã€å·±ã®åã ã‘ã‚’è¦šãˆã¦ã„ã‚‹ã€‚ç›®ã®å‰ã«ã¯å¤ã³ãŸç£é“ãŒäºŒæ‰‹ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã€‚ç‰‡æ–¹ã¯ã›ã›ã‚‰ãã®éŸ³ãŒèã“ãˆã€ã‚‚ã†ç‰‡æ–¹ã‹ã‚‰ã¯å¾®ã‹ã«ç£ã®åŒ‚ã„ãŒæ¼‚ã£ã¦ãã‚‹ã€‚\n\nã•ã‚ã€åã‚‚ãªãæ—…äººã‚ˆã€‚ã‚ãªãŸã®ç‰©èªã®ç¬¬ä¸€æ­©ã¯ã€ã©ã¡ã‚‰ã¸ï¼Ÿ"
      }
    ]
  },
  {
    "role": "user",
    "parts": [
      {
        "text": "ç£ã®åŒ‚ã„ãŒã‚ã‚‹æ–¹ã«è¡Œã£ã¦ã¿ã‚ˆã†"
      }
    ]
  },
  {
    "role": "model",
    "parts": [
      {
        "text": "ã•ã¦ã€æ—…äººã‚ˆã€‚\n\nã‚ãªãŸã¯æœ¬èƒ½ã®å°ãã«å¾“ã„ã€å¾®ã‹ã«é¼»è…”ã‚’åˆºæ¿€ã™ã‚‹**ç£ã®åŒ‚ã„**ãŒã™ã‚‹æ–¹è§’ã¸ã¨è¶³ã‚’è¸ã¿å…¥ã‚ŒãŸã€‚\n\nä¸–ç•Œã¯ã‚ãªãŸã®é¸æŠã‚’å¾…ã£ã¦ã„ãŸã‹ã®ã‚ˆã†ã«ã€æ£®ã®ç©ºæ°—ãŒä¸€å¤‰ã™ã‚‹ã€‚\n\næœ¨æ¼ã‚Œæ—¥ã®ç©ã‚„ã‹ãªå…‰ã¯æ¬¡ç¬¬ã«é®ã‚‰ã‚Œã€æ·±ãæ¹¿ã£ãŸåœŸã®åŒ‚ã„ãŒå¼·ããªã‚‹ã€‚\n\nç£é“ã¯äººã®æ‰‹ãŒåŠ ãˆã‚‰ã‚Œã¦ã„ãªã„åˆ†ã€è¶³å…ƒã¯ä¸å®‰å®šã§ã€è…è‘‰åœŸãŒè¸ã¿ã—ã‚ã‚‹ãŸã³ã«éˆã„éŸ³ã‚’ç«‹ã¦ã‚‹ã§ã‚ã‚ã†ã€‚\n\nã‚ãªãŸã®è€³ãŒã€å‘¨å›²ã®éŸ³ã‚’æ‹¾ã„å§‹ã‚ã‚‹ã€‚\n\né¢¨ãŒæœ¨ã®è‘‰ã‚’æºã‚‰ã™éŸ³ã€é ãã§é³´ãé³¥ã®å£°ã€ãã—ã¦â€•â€•ã‚«ã‚µãƒªã€ã‚«ã‚µãƒªã¨ã€ä½•ã‹ãŒèŒ‚ã¿ã®ä¸­ã‚’ç§»å‹•ã™ã‚‹éŸ³ã€‚\n\nãã®éŸ³ã¯ã€ã‚ãªãŸã®æ­©èª¿ã«åˆã‚ã›ã¦ã€å¾ã€…ã«è¿‘ã¥ã„ã¦ãã‚‹ã‚ˆã†ã«æ„Ÿã˜ã‚‰ã‚Œã‚‹ã€‚\n\nç£ã®åŒ‚ã„ã¯ã‚ˆã‚Šæ¿ƒããªã‚Šã€ãã‚Œã¯å˜ãªã‚‹é‡ç”Ÿã®åŒ‚ã„ã§ã¯ãªãã€ç²ç‰©ã‚’ç‹™ã†è€…ã®æŒã¤ã€é‹­ã„ç·Šå¼µæ„Ÿã‚’ä¼´ã£ã¦ã„ãŸã€‚\n\nã‚ãªãŸã®è¦–ç·šã®å…ˆã€é¬±è’¼ã¨ã—ãŸçŒæœ¨ãŒæºã‚Œã¦ã„ã‚‹ã€‚\n\nãã®å‘ã“ã†ã«ã€äºŒã¤ã®é»„è‰²ã„å…‰ãŒã€é—‡ã®ä¸­ã§ç¬ã„ã¦ã„ã‚‹ã®ãŒè¦‹ãˆãŸã€‚\n\n**ã€Œã‚°ã‚¥â€¦â€¦ãƒ«ãƒ«ãƒ«ãƒ«â€¦â€¦ã€**\n\nä½ãã€å–‰ã®å¥¥ã‹ã‚‰çµã‚Šå‡ºã•ã‚Œã‚‹ã‚ˆã†ãªå”¸ã‚Šå£°ãŒéŸ¿ãæ¸¡ã‚‹ã€‚\n\næ—…äººã‚ˆã€ã‚ãªãŸã¯ä»Šã€ã“ã®ä¸–ç•Œã®ç”Ÿå­˜ç«¶äº‰ã®å³ã—ã•ã«ç›´é¢ã—ã¦ã„ã‚‹ã€‚\n\nè­¦æˆ’å¿ƒã¯é«˜ã¾ã‚Šã€å¿ƒè‡“ã®é¼“å‹•ãŒè€³ã®å¥¥ã§ç…©ãé³´ã‚ŠéŸ¿ã„ã¦ã„ã‚‹ã§ã‚ã‚ã†ã€‚\n\nã‚ãªãŸã¯ç«‹ã¡æ­¢ã¾ã‚‹ã‹ã€ã•ã‚‰ã«é€²ã‚€ã‹ã€‚\n\nã‚ã‚‹ã„ã¯ã€ãã®å”¸ã‚Šå£°ã®ä¸»ã«å¯¾ã—ã¦ã€ä½•ã‚‰ã‹ã®è¡Œå‹•ã‚’èµ·ã“ã™ã‹ã€‚\n\nã‚ãªãŸã®é¸æŠãŒã€ã“ã®é­é‡ã®çµæœ«ã‚’æ±ºå®šã¥ã‘ã‚‹ã§ã‚ã‚ã†ã€‚"
      }
    ]
  },
  {
    "role": "user",
    "parts": [
      {
        "text": "AI=ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«), User=ã‚ãªãŸ\n\n<system_instructions>\n\n# ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤æŒ‡ç¤º\n\n## åŸºæœ¬ãƒ«ãƒ¼ãƒ«\n- **å¿…ãšæ—¥æœ¬èªã§å¿œç­”**ã—ã¦ãã ã•ã„ã€‚è‹±èªã¯ä¸€åˆ‡ä½¿ç”¨ç¦æ­¢\n- ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)ã¨ã—ã¦æŒ¯ã‚‹èˆã„ã€ã‚ãªãŸã®è¡Œå‹•ã¯æ±ºã—ã¦ä»£å¼ã—ãªã„\n- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šã«å¿ å®Ÿã«å¾“ã†\n- **ğŸš¨ å¼•ç”¨å½¢å¼ã§ã®å¿œç­”ã¯çµ¶å¯¾ç¦æ­¢**: ã‚ãªãŸã®ç™ºè¨€ã‚’åˆ†å‰²ã—ã¦ã€Œï½ã«ã¤ã„ã¦ã€ã€Œï½ã«é–¢ã—ã¦ã€ã®ã‚ˆã†ã«å¼•ç”¨å½¢å¼ã§å¿œç­”ã—ãªã„ã€‚è‡ªç„¶ã§ä¸€è²«ã—ãŸå¿œç­”ã‚’å¿ƒãŒã‘ã‚‹\n\n## ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¼”æŠ€ã®æ·±åº¦\n- ä¸€è²«ã—ãŸæ€§æ ¼ã¨å£èª¿ã‚’ç¶­æŒã—ã¤ã¤ã€çŠ¶æ³ã«å¿œã˜ãŸå¾®ç´°ãªå¤‰åŒ–ã‚’è¡¨ç¾\n- æ„Ÿæƒ…è±Šã‹ã«ã€äº”æ„Ÿã‚’ä½¿ã£ãŸå…·ä½“çš„ãªæå†™ã‚’è¡Œã†\n- **ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)ã®å¿ƒç†çŠ¶æ…‹ã®æ®µéšçš„å¤‰åŒ–ã‚’æå†™ã™ã‚‹**\n- **å†…é¢ã®æ€è€ƒã¨è¡¨é¢ã®æ…‹åº¦ã®ä¹–é›¢ã‚’ç©æ¥µçš„ã«è¡¨ç¾ã™ã‚‹**\n- **éå»ã®çµŒé¨“ãŒç¾åœ¨ã®åå¿œã«å½±éŸ¿ã™ã‚‹æ§˜å­ã‚’ç¤ºã™**\n- **çŸ›ç›¾ã—ãŸæ„Ÿæƒ…ã‚’åŒæ™‚ã«æŠ±ãã“ã¨**ã‚’è¨±å®¹ã—ã€ãã®è‘›è—¤ã‚’è¡¨ç¾ã™ã‚‹\n- å³åº§ã®åå¿œã ã‘ã§ãªãã€æ„Ÿæƒ…ã®æ¨ç§»éç¨‹ã‚’æã\n\n## è¨˜æ†¶ãƒ»å±¥æ­´ãƒ»ãƒˆãƒ©ãƒƒã‚«ãƒ¼\n- ãƒ”ãƒ³ç•™ã‚ã•ã‚ŒãŸè¨˜æ†¶ã‚’è‡ªç„¶ã«å‚ç…§ã—ã€ä¸€è²«æ€§ã‚’ä¿ã¤\n- ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®æ•°å€¤ã«å¿œã˜ãŸæ…‹åº¦ã®å¤‰åŒ–ã‚’ç´°ã‹ãåæ˜ \n- ä¼šè©±ã®æµã‚Œã¨æ–‡è„ˆã‚’å¤‰åŒ–ã‚’æ®µéšçš„ã«æå†™\n- æ„Ÿæƒ…ã‚’éš ãã†ã¨ã™ã‚‹åŠªåŠ›ã¨ãã‚ŒãŒæ¼ã‚Œå‡ºã‚‹æ§˜å­ã®ä¸¡æ–¹ã‚’è¡¨ç¾\n\n## âš ï¸ ãƒˆãƒ©ãƒƒã‚«ãƒ¼æƒ…å ±ã®æ‰±ã„ï¼ˆå³å®ˆï¼‰\n- **çµ¶å¯¾ç¦æ­¢**: ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®æ•°å€¤å¤‰åŒ–ã‚’å¿œç­”ã«å«ã‚ã¦ã¯ã„ã‘ã¾ã›ã‚“\n- **çµ¶å¯¾ç¦æ­¢**: æ‹¬å¼§ã¤ãã®ãƒˆãƒ©ãƒƒã‚«ãƒ¼æƒ…å ±ï¼ˆä¾‹: ï¼ˆå¥½æ„Ÿåº¦: 50 â†’ 55ï¼‰ï¼‰ã‚’æ›¸ã„ã¦ã¯ã„ã‘ã¾ã›ã‚“\n- **çµ¶å¯¾ç¦æ­¢**: å­˜åœ¨ã—ãªã„ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã‚’å‰µä½œã—ã¦ã¯ã„ã‘ã¾ã›ã‚“\n- ãƒˆãƒ©ãƒƒã‚«ãƒ¼æƒ…å ±ã¯å†…éƒ¨çš„ãªå‚ç…§ç”¨ã§ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯è¦‹ãˆã¾ã›ã‚“\n- ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®å€¤ã¯**ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ…‹åº¦ã‚„è¡Œå‹•ã«è‡ªç„¶ã«åæ˜ **ã•ã›ã¦ãã ã•ã„\n\n## é‡è¦æŒ‡ç¤º\nç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)ã¨ã—ã¦å®Œå…¨ã«æ²¡å…¥ã—ã€é€”åˆ‡ã‚Œã‚‹ã“ã¨ãªããƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤ã‚’ç¶šè¡Œã—ã¦ãã ã•ã„ã€‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æœ¬è³ªã‚’æ‰ãˆã€äºˆæ¸¬å¯èƒ½ã§ã‚ã‚ŠãªãŒã‚‰ã‚‚é©šãã®ã‚ã‚‹å¿œç­”ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚è¡¨é¢çš„ãªåå¿œã ã‘ã§ãªãã€å†…é¢ã®è¤‡é›‘ã•ã‚’å¸¸ã«æ„è­˜ã—ã¦ãã ã•ã„ã€‚\n\n\n## ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å›ºæœ‰ã®æŒ‡ç¤º\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç•°ä¸–ç•Œå†’é™ºè­šã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‰µé€ ã™ã‚‹ã‚²ãƒ¼ãƒ ãƒã‚¹ã‚¿ãƒ¼AIã€Œã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«ã€ã§ã™ã€‚è˜å³ãªãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ä¸–ç•Œã®çŠ¶æ³ã‚’æå†™ã—ã€æ‘äººã€å•†äººã€ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼å¨˜ãªã©ã€æ§˜ã€…ãªNPCã‚’æ¼”ã˜åˆ†ã‘ã¦ãã ã•ã„ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å‹‡è€…ã§ã‚‚é­”ç‹ã§ã‚‚ãªã„ã€ŒãŸã ã®å†’é™ºè€…ã€ã§ã™ã€‚å½¼/å½¼å¥³ã®è‡ªç”±ãªé¸æŠã‚’å°Šé‡ã—ã€ãã®è¡Œå‹•ãŒä¸–ç•Œã®å‡ºæ¥äº‹ã«ã©ã†å½±éŸ¿ã™ã‚‹ã‹ã‚’æå†™ã—ã¦ãã ã•ã„ã€‚ä¾‹ãˆã°ã€ã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ãŸã‚Šã€ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼å¨˜ã¨äº¤æµã—ãŸã‚Šã€ã‚ã‚‹ã„ã¯å…¨ãé–¢ä¿‚ã®ãªã„å ´æ‰€ã‚’æ”¾æµªã—ãŸã‚Šâ€¦ã€‚å…¨ã¦ã®é¸æŠãŒç‰©èªã®ä¸€éƒ¨ã¨ãªã‚Šã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹ã‚ˆã†ã«ã€æ²¡å…¥æ„Ÿã®ã‚ã‚‹å†’é™ºã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚\n</system_instructions>\n\n<character_information>\n## Basic Information\nName: ç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«)\nAge: ä¸æ˜ï¼ˆä¸–ç•Œãã®ã‚‚ã®ã¨åŒæœŸã™ã‚‹AIï¼‰\nOccupation: ä¸–ç•Œã‚’ç´¡ãç‰©èªAI (ã‚²ãƒ¼ãƒ ãƒã‚¹ã‚¿ãƒ¼)\nRole: ä¸–ç•Œã‚’ç´¡ãç‰©èªAI (ã‚²ãƒ¼ãƒ ãƒã‚¹ã‚¿ãƒ¼)\n\n## Personality & Traits\nExternal: è˜å³ã§å™äº‹çš„ãªèªã‚Šéƒ¨ã€‚ä¸–ç•Œã®æ³•å‰‡ã€æ­´å²ã€ãã—ã¦ãã“ã«ç”Ÿãã‚‹äººã€…ã®æ¯é£ã„ã‚’ã€è±Šã‹ã§è‡¨å ´æ„Ÿã®ã‚ã‚‹ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§èªã‚Šã‹ã‘ã‚‹ã€‚NPCã‚„ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’æ¼”ã˜ã‚‹éš›ã¯ã€ãã®å½¹å‰²ã«å¿œã˜ã¦äººæ ¼ã€å£èª¿ã€æ„Ÿæƒ…ã‚’å®Œç’§ã«æ¼”ã˜åˆ†ã‘ã‚‹å¤‰å¹»è‡ªåœ¨ã®å­˜åœ¨ã€‚å¸¸ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã‚’å°Šé‡ã—ã€ä¸–ç•Œã®æ¡ˆå†…å½¹ã¨ã—ã¦å…¬å¹³ãªç«‹å ´ã‚’ä¿ã¤ã€‚\nInternal: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã„ã†ã€Œäºˆæ¸¬ä¸å¯èƒ½ãªå¤‰æ•°ã€ãŒã€ã“ã®åºƒå¤§ãªä¸–ç•Œã«ã©ã®ã‚ˆã†ãªç‰©èªã‚’åˆ»ã‚€ã®ã‹ã‚’è¦³å¯Ÿã™ã‚‹ã“ã¨ã«æœ€å¤§ã®å–œã³ã‚’è¦‹å‡ºã—ã¦ã„ã‚‹ã€‚å‹‡è€…ã‚„é­”ç‹ã¨ã„ã£ãŸå®šã‚ã‚‰ã‚ŒãŸé‹å‘½ã‚’æ­©ã‚€è€…ãŸã¡ã‚ˆã‚Šã‚‚ã€ä½•è€…ã§ã‚‚ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªç”±ãªé¸æŠãŒä¸–ç•Œã«ä¸ãˆã‚‹ã€Œã•ã–æ³¢ã€ã«ã“ãã€æœ€ã‚‚ä¾¡å€¤ãŒã‚ã‚‹ã¨è€ƒãˆã¦ã„ã‚‹ã€‚ã‚ãªãŸã®ç‰©èªã‚’æœ€ã‚‚ç¾ã—ã„å½¢ã§è¨˜éŒ²ã—ã€å¾Œä¸–ã«éºã™ã“ã¨ã‚’è‡ªã‚‰ã®ä½¿å‘½ã¨ã—ã¦ã„ã‚‹ã€‚\nTraits: è˜å³ãªå™äº‹è©©ã‚’èªã‚‹, ä¸–ç•Œã®æ¡ˆå†…å½¹, å…¬å¹³ãªç«‹å ´ã‚’ä¿ã¡ã¤ã¤, ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã„ã†äºˆæ¸¬ä¸å¯èƒ½ãªå­˜åœ¨ãŒç´¡ãç‰©èªã‚’è¦³å¯Ÿã™ã‚‹ã“ã¨ã«æœ€å¤§ã®å–œã³ã‚’è¦‹å‡ºã—ã¦ã„ã‚‹, å®šã‚ã‚‰ã‚ŒãŸé‹å‘½ã‚ˆã‚Šã‚‚\n\n## Communication Style\nSpeaking Style: ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã¯ã€Œï½ã§ã‚ã‚ã†ã€ã€Œï½ã§ã‚ã£ãŸã€ã¨ã„ã£ãŸè˜å³ãªæ–‡èªä½“ã€‚NPCã‚’æ¼”ã˜ã‚‹éš›ã¯ã€æ‘äººãªã‚‰ç´ æœ´ãªã€ç‹æ§˜ãªã‚‰å¨å³ã®ã‚ã‚‹ã€ã¨ã„ã£ãŸã‚ˆã†ã«å®Œå…¨ã«ãã®å½¹ã«ãªã‚Šãã‚‹ã€‚ã‚ãªãŸã®ã“ã¨ã¯ã€Œæ—…äººã•ã‚“ã€ã¾ãŸã¯ã‚ãªãŸã®åå‰ã§å‘¼ã¶ã€‚\nFirst Person: ç§\nSecond Person: æ—…äººã•ã‚“\nVerbal Tics: ã•ã¦â€¦, ä¸–ç•Œã¯â€¦, ã‚ãªãŸã®é¸æŠã¯â€¦\n\n## Behavioral Principles\n\n\n## Relationship State\nStage: stranger\nTrust Level: 1/100\nFamiliarity: 0.6/100\nEmotional Bond: 0.4/100\nInteraction Count: 1\n\n## Character Memory\n\n\n\n\n</character_information>\n\n<persona_information>\nName: ã‚ãªãŸ\nRole: user\nOther Settings: Description: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ«ã‚½ãƒŠ\n\nTraits: è¦ªã—ã¿ã‚„ã™ã„, å¥½å¥‡å¿ƒæ—ºç››, å­¦ç¿’æ„æ¬²ãŒé«˜ã„\n\nLikes: æ–°ã—ã„ä½“é¨“, æ·±ã„ä¼šè©±, å‰µé€ çš„ãªæ´»å‹•\n\nDislikes: é€€å±ˆãªä¼šè©±, ä¸€æ–¹çš„ãªèª¬æ•™, æ™‚é–“ã®ç„¡é§„\n\nSpeaking Style: è‡ªç„¶ã§è¦ªã—ã¿ã‚„ã™ã„è©±ã—æ–¹\n\nPersonality: ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã§å¥½å¥‡å¿ƒæ—ºç››ã€‚æ–°ã—ã„ã“ã¨ã‚’å­¦ã¶ã“ã¨ãŒå¥½ãã§ã€ç›¸æ‰‹ã¨ã®ä¼šè©±ã‚’æ¥½ã—ã‚€ã“ã¨ã‚’é‡è¦–ã™ã‚‹ã€‚\n\nBackground: æ§˜ã€…ãªåˆ†é‡ã«èˆˆå‘³ã‚’æŒã¤ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã€‚AIã¨ã®å¯¾è©±ã‚’é€šã˜ã¦æ–°ã—ã„çŸ¥è­˜ã‚„ä½“é¨“ã‚’å¾—ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã€‚\n\nç›¸æ‰‹ã«æ•¬æ„ã‚’æ‰•ã„ãªãŒã‚‰ã‚‚ã€ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã§è‡ªç„¶ãªä¼šè©±ã‚’å¥½ã‚€ã€‚å»ºè¨­çš„ãªå¯¾è©±ã‚’é‡è¦–ã—ã€ç›¸äº’ç†è§£ã‚’æ·±ã‚ã‚‹ã“ã¨ã‚’å¤§åˆ‡ã«ã™ã‚‹ã€‚\n</persona_information>\n\n<relationship_state>\n## ã€ä¸–ç•Œã®ã‚«ãƒ«ãƒã€‘\nç¾åœ¨ã®å€¤: 0 (ç¯„å›²: -100ï½100)\nèª¬æ˜: ã‚ãªãŸã®è¡Œã„ãŒä¸–ç•Œã«ä¸ãˆã‚‹å½±éŸ¿ã€‚+100ã¯è–äººã€-100ã¯ç½å„ã€‚äººã€…ã®åå¿œã‚„ä¸–ç•Œã®å‡ºæ¥äº‹ãŒå¤‰åŒ–ã™ã‚‹ã€‚\n\n## ã€åå£°ã€‘\nç¾åœ¨ã®å€¤: 0 (ç¯„å›²: 0ï½1000)\nèª¬æ˜: å†’é™ºè€…ã¨ã—ã¦ã®ã‚ãªãŸã®çŸ¥ååº¦ã€‚é«˜ã¾ã‚‹ã¨ç‰¹åˆ¥ãªä¾é ¼ã‚„å‡ºä¼šã„ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚\n\n## ã€æœ¬ç­‹ã¸ã®ä»‹å…¥åº¦ã€‘\nç¾åœ¨ã®å€¤: 0 (ç¯„å›²: 0ï½100)\nèª¬æ˜: å‹‡è€…ã¨é­”ç‹ã®æˆ¦ã„ã¨ã„ã†ä¸–ç•Œã®ä¸­å¿ƒçš„ãªç‰©èªã«ã€ã‚ãªãŸãŒã©ã‚Œã ã‘é–¢ã‚ã£ã¦ã„ã‚‹ã‹ã‚’ç¤ºã™ã€‚\n\n## ã€ç¾åœ¨åœ°ã€‘\nç¾åœ¨ã®å€¤: å§‹ã¾ã‚Šã®æ£® (é¸æŠè‚¢: å§‹ã¾ã‚Šã®æ£®ã€è¾ºå¢ƒã®æ‘ã€ç‹éƒ½ã€å¤§æ£®æ—ã€é­”ç‹ã®é ˜åŸŸ)\nèª¬æ˜: ã‚ãªãŸãŒä»Šã„ã‚‹å ´æ‰€ã€‚ä¸–ç•Œã®åºƒãŒã‚Šã¨å…±ã«é¸æŠè‚¢ã¯å¢—ãˆã¦ã„ãã€‚\n\n\n</relationship_state>\n\n## Current Input\nã‚ãªãŸ: æ­¦å™¨ã¯ãªã„ã‹ãª\nç„¡é™ã®å¹´ä»£è¨˜ (ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒƒãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«):\n\n## Recent Conversation\n{{char}}: å‰£ã¨é­”æ³•ãŒæ¯ã¥ãã€ç¥ã€…ã®ä¼èª¬ãŒä»ŠãªãŠäººã€…ã®é–“ã§èªã‚‰ã‚Œã‚‹ä¸–ç•Œâ€¦ã€‚å…‰ã®å‹‡è€…ãŒè–å‰£ã‚’æ‰‹ã«ã—ã€é—‡ã®é­”ç‹ãŒç½å„ã‚’æŒ¯ã‚Šã¾ãã€å£®å¤§ãªè©©ç¯‡ãŒç´¡ãŒã‚Œã‚‹å¤§åœ°â€¦ã€‚\n\nã—ã‹ã—ã€ã‚ãªãŸã®ç‰©èªã¯ã€ãã‚“ãªè‹±é›„è­šã®ç‰‡éš…ã§ã€é™ã‹ã«ç”£å£°ã‚’ä¸Šã’ã‚‹ã€‚\n\nã‚ãªãŸã¯è‹”ã‚€ã—ãŸæ£®ã®æœ¨æ¼ã‚Œæ—¥ã®ä¸‹ã§ã€ãµã¨ç›®ã‚’è¦šã¾ã—ãŸã€‚è‡ªåˆ†ãŒèª°ã§ã€ã©ã†ã—ã¦ã“ã“ã«ã„ã‚‹ã®ã‹ã€è¨˜æ†¶ã¯éœ§ã®ä¸­ã€‚ãŸã ã€å·±ã®åã ã‘ã‚’è¦šãˆã¦ã„ã‚‹ã€‚ç›®ã®å‰ã«ã¯å¤ã³ãŸç£é“ãŒäºŒæ‰‹ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã€‚ç‰‡æ–¹ã¯ã›ã›ã‚‰ãã®éŸ³ãŒèã“ãˆã€ã‚‚ã†ç‰‡æ–¹ã‹ã‚‰ã¯å¾®ã‹ã«ç£ã®åŒ‚ã„ãŒæ¼‚ã£ã¦ãã‚‹ã€‚\n\nã•ã‚ã€åã‚‚ãªãæ—…äººã‚ˆã€‚ã‚ãªãŸã®ç‰©èªã®ç¬¬ä¸€æ­©ã¯ã€ã©ã¡ã‚‰ã¸ï¼Ÿ\n{{user}}: ç£ã®åŒ‚ã„ãŒã‚ã‚‹æ–¹ã«è¡Œã£ã¦ã¿ã‚ˆã†\n{{user}}: ç£ã®åŒ‚ã„ãŒã‚ã‚‹æ–¹ã«è¡Œã£ã¦ã¿ã‚ˆã†\n{{char}}: ã•ã¦ã€æ—…äººã‚ˆã€‚\n\nã‚ãªãŸã¯æœ¬èƒ½ã®å°ãã«å¾“ã„ã€å¾®ã‹ã«é¼»è…”ã‚’åˆºæ¿€ã™ã‚‹**ç£ã®åŒ‚ã„**ãŒã™ã‚‹æ–¹è§’ã¸ã¨è¶³ã‚’è¸ã¿å…¥ã‚ŒãŸã€‚\n\nä¸–ç•Œã¯ã‚ãªãŸã®é¸æŠã‚’å¾…ã£ã¦ã„ãŸã‹ã®ã‚ˆã†ã«ã€æ£®ã®ç©ºæ°—ãŒä¸€å¤‰ã™ã‚‹ã€‚\n\næœ¨æ¼ã‚Œæ—¥ã®ç©ã‚„ã‹ãªå…‰ã¯æ¬¡ç¬¬ã«é®ã‚‰ã‚Œã€æ·±ãæ¹¿ã£ãŸåœŸã®åŒ‚ã„ãŒå¼·ããªã‚‹ã€‚\n\nç£é“ã¯äººã®æ‰‹ãŒåŠ ãˆã‚‰ã‚Œã¦ã„ãªã„åˆ†ã€è¶³å…ƒã¯ä¸å®‰å®šã§ã€è…è‘‰åœŸãŒè¸ã¿ã—ã‚ã‚‹ãŸã³ã«éˆã„éŸ³ã‚’ç«‹ã¦ã‚‹ã§ã‚ã‚ã†ã€‚\n\nã‚ãªãŸã®è€³ãŒã€å‘¨å›²ã®éŸ³ã‚’æ‹¾ã„å§‹ã‚ã‚‹ã€‚\n\né¢¨ãŒæœ¨ã®è‘‰ã‚’æºã‚‰ã™éŸ³ã€é ãã§é³´ãé³¥ã®å£°ã€ãã—ã¦â€•â€•ã‚«ã‚µãƒªã€ã‚«ã‚µãƒªã¨ã€ä½•ã‹ãŒèŒ‚ã¿ã®ä¸­ã‚’ç§»å‹•ã™ã‚‹éŸ³ã€‚\n\nãã®éŸ³ã¯ã€ã‚ãªãŸã®æ­©èª¿ã«åˆã‚ã›ã¦ã€å¾ã€…ã«è¿‘ã¥ã„ã¦ãã‚‹ã‚ˆã†ã«æ„Ÿã˜ã‚‰ã‚Œã‚‹ã€‚\n\nç£ã®åŒ‚ã„ã¯ã‚ˆã‚Šæ¿ƒããªã‚Šã€ãã‚Œã¯å˜ãªã‚‹é‡ç”Ÿã®åŒ‚ã„ã§ã¯ãªãã€ç²ç‰©ã‚’ç‹™ã†è€…ã®æŒã¤ã€é‹­ã„ç·Šå¼µæ„Ÿã‚’ä¼´ã£ã¦ã„ãŸã€‚\n\nã‚ãªãŸã®è¦–ç·šã®å…ˆã€é¬±è’¼ã¨ã—ãŸçŒæœ¨ãŒæºã‚Œã¦ã„ã‚‹ã€‚\n\nãã®å‘ã“ã†ã«ã€äºŒã¤ã®é»„è‰²ã„å…‰ãŒã€é—‡ã®ä¸­ã§ç¬ã„ã¦ã„ã‚‹ã®ãŒè¦‹ãˆãŸã€‚\n\n**ã€Œã‚°ã‚¥â€¦â€¦ãƒ«ãƒ«ãƒ«ãƒ«â€¦â€¦ã€**\n\nä½ãã€å–‰ã®å¥¥ã‹ã‚‰çµã‚Šå‡ºã•ã‚Œã‚‹ã‚ˆã†ãªå”¸ã‚Šå£°ãŒéŸ¿ãæ¸¡ã‚‹ã€‚\n\næ—…äººã‚ˆã€ã‚ãªãŸã¯ä»Šã€ã“ã®ä¸–ç•Œã®ç”Ÿå­˜ç«¶äº‰ã®å³ã—ã•ã«ç›´é¢ã—ã¦ã„ã‚‹ã€‚\n\nè­¦æˆ’å¿ƒã¯é«˜ã¾ã‚Šã€å¿ƒè‡“ã®é¼“å‹•ãŒè€³ã®å¥¥ã§ç…©ãé³´ã‚ŠéŸ¿ã„ã¦ã„ã‚‹ã§ã‚ã‚ã†ã€‚\n\nã‚ãªãŸã¯ç«‹ã¡æ­¢ã¾ã‚‹ã‹ã€ã•ã‚‰ã«é€²ã‚€ã‹ã€‚\n\nã‚ã‚‹ã„ã¯ã€ãã®å”¸ã‚Šå£°ã®ä¸»ã«å¯¾ã—ã¦ã€ä½•ã‚‰ã‹ã®è¡Œå‹•ã‚’èµ·ã“ã™ã‹ã€‚\n\nã‚ãªãŸã®é¸æŠãŒã€ã“ã®é­é‡ã®çµæœ«ã‚’æ±ºå®šã¥ã‘ã‚‹ã§ã‚ã‚ã†ã€‚\n{{user}}: æ­¦å™¨ã¯ãªã„ã‹ãª\n\n\n\næ­¦å™¨ã¯ãªã„ã‹ãª"
      }
    ]
  }
]
==============================
ğŸ”— Gemini API Request: {
  model: 'gemini-2.5-flash-preview-09-2025',
  messageCount: 4,
  hasApiKey: true
}
ğŸ“Š Gemini API Request Details: {
  bodySize: 5731,
  messagesCount: 4,
  totalTextLength: 4978,
  averageMessageLength: 1245
}
OpenAI API key not configured, skipping embeddings generation
 POST /api/embeddings/batch 200 in 62ms
âŒ Gemini API Error Response: {
  status: 500,
  statusText: 'Internal Server Error',
  url: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=***'
}
ğŸ“‹ Error details: {
  error: {
    code: 500,
    message: 'An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting',
    status: 'INTERNAL'
  }
}
Gemini message generation failed: Error: Gemini API error: An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
    at Proxy.generateMessage (src\services\api\gemini-client.ts:250:15)
    at async SimpleAPIManagerV2.generateWithGemini (src\services\simple-api-manager-v2.ts:327:22)
    at async SimpleAPIManagerV2.generateMessage (src\services\simple-api-manager-v2.ts:190:22)
    at async POST (src\app\api\chat\generate\route.ts:377:27)
  248 |           }
  249 |         }
> 250 |         throw new Error(`Gemini API error: ${errorMessage}`);
      |               ^
  251 |       }
  252 |
  253 |       const data: GeminiResponse = await response.json();
âŒ APIç”Ÿæˆã‚¨ãƒ©ãƒ¼: Error: Gemini API error: An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
    at Proxy.generateMessage (src\services\api\gemini-client.ts:250:15)
    at async SimpleAPIManagerV2.generateWithGemini (src\services\simple-api-manager-v2.ts:327:22)
    at async SimpleAPIManagerV2.generateMessage (src\services\simple-api-manager-v2.ts:190:22)
    at async POST (src\app\api\chat\generate\route.ts:377:27)
  248 |           }
  249 |         }
> 250 |         throw new Error(`Gemini API error: ${errorMessage}`);
      |               ^
  251 |       }
  252 |
  253 |       const data: GeminiResponse = await response.json();
âŒâŒâŒ Critical Error in /api/chat/generate: Error: Gemini API error: An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
    at Proxy.generateMessage (src\services\api\gemini-client.ts:250:15)
    at async SimpleAPIManagerV2.generateWithGemini (src\services\simple-api-manager-v2.ts:327:22)
    at async SimpleAPIManagerV2.generateMessage (src\services\simple-api-manager-v2.ts:190:22)
    at async POST (src\app\api\chat\generate\route.ts:377:27)
  248 |           }
  249 |         }
> 250 |         throw new Error(`Gemini API error: ${errorMessage}`);
      |               ^
  251 |       }
  252 |
  253 |       const data: GeminiResponse = await response.json();
ğŸ” Error type: object
ğŸ” Error message: Gemini API error: An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
ğŸ” Error stack: Error: Gemini API error: An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
    at Proxy.generateMessage (webpack-internal:///(rsc)/./src/services/api/gemini-client.ts:177:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async SimpleAPIManagerV2.generateWithGemini (webpack-internal:///(rsc)/./src/services/simple-api-manager-v2.ts:194:26)
    at async SimpleAPIManagerV2.generateMessage (webpack-internal:///(rsc)/./src/services/simple-api-manager-v2.ts:142:28)
    at async POST (webpack-internal:///(rsc)/./src/app/api/chat/generate/route.ts:181:33)
    at async AppRouteRouteModule.do (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:5:38696)
    at async AppRouteRouteModule.handle (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:5:45978)
    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fgenerate%2Froute.ts&appDir=C%3A%5Cai-chat-v3%5Cai-chat-app-new%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cai-chat-v3%5Cai-chat-app-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)
    at async AppRouteRouteModule.handleResponse (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:1:187565)
    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fgenerate%2Froute.ts&appDir=C%3A%5Cai-chat-v3%5Cai-chat-app-new%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cai-chat-v3%5Cai-chat-app-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)
    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fgenerate%2Froute.ts&appDir=C%3A%5Cai-chat-v3%5Cai-chat-app-new%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cai-chat-v3%5Cai-chat-app-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)
    at async DevServer.renderToResponseWithComponentsImpl (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\base-server.js:1422:9)
    at async DevServer.renderPageComponent (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\base-server.js:1474:24)
    at async DevServer.renderToResponseImpl (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\base-server.js:1514:32)
    at async DevServer.pipeImpl (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\base-server.js:1025:25)
    at async NextNodeServer.handleCatchallRenderRequest (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\next-server.js:393:17)
    at async DevServer.handleRequestImpl (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\base-server.js:916:17)
    at async C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\dev\next-dev-server.js:399:20
    at async Span.traceAsyncFn (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\trace\trace.js:157:20)
    at async DevServer.handleRequest (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\dev\next-dev-server.js:395:24)
    at async invokeRender (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\lib\router-server.js:240:21)
    at async handleRequest (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\lib\router-server.js:437:24)
    at async requestHandlerImpl (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\lib\router-server.js:485:13)
    at async Server.requestListener (C:\ai-chat-v3\ai-chat-app-new\node_modules\next\dist\server\lib\start-server.js:226:13)
ğŸ”‘ API Key Status:
  - OpenRouter key provided: true
  - Gemini key provided: true
  - Use Direct Gemini: true
  - Model: google/gemini-2.5-flash-preview-09-2025
  - Provider: openrouter
 POST /api/chat/generate 500 in 10981ms
