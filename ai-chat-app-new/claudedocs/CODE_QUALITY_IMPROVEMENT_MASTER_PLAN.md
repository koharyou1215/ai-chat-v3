# AI Chat V3 ã‚³ãƒ¼ãƒ‰å“è³ªæ”¹å–„ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ©ãƒ³

**ä½œæˆæ—¥**: 2025-10-30
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**ç›®çš„**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å“è³ªã€ä¿å®ˆæ€§ã€ä¿¡é ¼æ€§ã®å‘ä¸Š

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼](#ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼)
2. [ç¾çŠ¶åˆ†æ](#ç¾çŠ¶åˆ†æ)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦)
4. [æ”¹å–„ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](#æ”¹å–„ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—)
5. [Phase 1: ç·Šæ€¥å¯¾å¿œ](#phase-1-ç·Šæ€¥å¯¾å¿œ)
6. [Phase 2: æ§‹é€ æ”¹å–„](#phase-2-æ§‹é€ æ”¹å–„)
7. [Phase 3: å“è³ªå‘ä¸Š](#phase-3-å“è³ªå‘ä¸Š)
8. [å®Ÿè£…ã‚¬ã‚¤ãƒ‰](#å®Ÿè£…ã‚¬ã‚¤ãƒ‰)
9. [æ¤œè¨¼æ–¹æ³•](#æ¤œè¨¼æ–¹æ³•)
10. [æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³å¼•ãç¶™ã](#æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³å¼•ãç¶™ã)

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: AI Chat V3
æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: Next.js 15.5.4 + TypeScript + Zustand
ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 309 (TypeScript/TSX)
ç·è¡Œæ•°: 71,562
ã‚µãƒ¼ãƒ“ã‚¹å±¤: 93ãƒ•ã‚¡ã‚¤ãƒ«
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 97ãƒ•ã‚¡ã‚¤ãƒ«
ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯: 16ãƒ•ã‚¡ã‚¤ãƒ«
```

### ç·åˆè©•ä¾¡

| é …ç›® | ã‚¹ã‚³ã‚¢ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|------|--------|-----------|
| å‹å®‰å…¨æ€§ | 3/10 | ğŸ”´ Critical |
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | 1/10 | ğŸ”´ Critical |
| ä¿å®ˆæ€§ | 5/10 | ğŸŸ¡ Needs Improvement |
| ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | 7/10 | ğŸŸ¢ Good |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | 6/10 | ğŸŸ¢ Fair |
| **ç·åˆ** | **5.2/10** | ğŸŸ¡ **Needs Attention** |

### æœ€å„ªå…ˆèª²é¡Œ

1. **ğŸ”´ å‹å®‰å…¨æ€§ã®æ¬ å¦‚**: 93ãƒ•ã‚¡ã‚¤ãƒ«ã§347å›ã®`any`å‹ä½¿ç”¨
2. **ğŸ”´ ãƒ†ã‚¹ãƒˆä¸è¶³**: æ¨å®šã‚«ãƒãƒ¬ãƒƒã‚¸ < 1%
3. **ğŸŸ¡ ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰**: 164ãƒ•ã‚¡ã‚¤ãƒ«ã§2015å›ã®consoleä½¿ç”¨
4. **ğŸŸ¡ å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«**: 1000è¡Œè¶…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ5ã¤å­˜åœ¨

---

## ç¾çŠ¶åˆ†æ

### ğŸ” ã‚³ãƒ¼ãƒ‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹

#### å‹å®‰å…¨æ€§ã®å•é¡Œ

```typescript
// âŒ å•é¡Œ: anyå‹ã®å¤šç”¨
const data: any = await response.json();
const result: any = processData(data);

// å½±éŸ¿ã‚’å—ã‘ã‚‹ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ« (ä¸Šä½10)
src/services/inspiration-service.ts              // 5ç®‡æ‰€
src/components/chat/ChatInterface.tsx            // 6ç®‡æ‰€
src/store/slices/chat/operations/message-send-handler.ts  // 10ç®‡æ‰€
src/services/memory/conversation-manager.ts      // 5ç®‡æ‰€
src/services/prompt-builder.service.ts           // 1ç®‡æ‰€
src/store/index.ts                               // 7ç®‡æ‰€
src/services/simple-api-manager-v2.ts            // 2ç®‡æ‰€
src/store/slices/groupChat.slice.ts             // 4ç®‡æ‰€
src/components/chat/MessageBubble.tsx           // 8ç®‡æ‰€
src/services/chat/message-sender.service.ts     // 4ç®‡æ‰€
```

**å½±éŸ¿ç¯„å›²**:
- ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã®å¢—åŠ 
- IDEã‚µãƒãƒ¼ãƒˆã®ä½ä¸‹
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒªã‚¹ã‚¯ã®å¢—å¤§

#### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®çŠ¶æ³

```
æ—¢å­˜ãƒ†ã‚¹ãƒˆ:
  âœ“ src/__tests__/time-formatters.test.ts
  âœ“ src/__tests__/session-storage.test.ts
  âœ“ src/__tests__/inspiration-service.test.ts

æœªãƒ†ã‚¹ãƒˆé ˜åŸŸï¼ˆé‡è¦åº¦é †ï¼‰:
  âœ— Zustandã‚¹ãƒˆã‚¢ (20ã‚¹ãƒ©ã‚¤ã‚¹)
  âœ— APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤
  âœ— ãƒ¡ãƒ¢ãƒªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
  âœ— ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
  âœ— æ„Ÿæƒ…åˆ†æã‚¨ãƒ³ã‚¸ãƒ³
  âœ— ãƒˆãƒ©ãƒƒã‚«ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
  âœ— Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (97ãƒ•ã‚¡ã‚¤ãƒ«)
```

#### ä¿å®ˆæ€§ã®å•é¡Œ

**å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§**:

| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œæ•° | è²¬ä»»ç¯„å›² | ãƒªã‚¹ã‚¯ |
|---------|------|---------|-------|
| `conversation-manager.ts` | 1,543 | ä¼šè©±ç®¡ç†ãƒ»ãƒ¡ãƒ¢ãƒªçµ±åˆ | ğŸ”´ High |
| `groupChat.slice.ts` | 1,472 | ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆçŠ¶æ…‹ | ğŸ”´ High |
| `ChatInterface.tsx` | 1,255 | ãƒ¡ã‚¤ãƒ³ãƒãƒ£ãƒƒãƒˆUI | ğŸ”´ High |
| `MessageBubble.tsx` | 1,165 | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º | ğŸŸ¡ Medium |
| `prompt-builder.service.ts` | 981 | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ | ğŸŸ¡ Medium |

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer              â”‚
â”‚  (Components: 97 files, Hooks: 16)      â”‚
â”‚  - ChatInterface, MessageBubble, etc.   â”‚
â”‚  - useAppStore: 191å›ä½¿ç”¨ (50ãƒ•ã‚¡ã‚¤ãƒ«)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         State Management Layer          â”‚
â”‚       (Zustand Store: 20 slices)        â”‚
â”‚  - chat.slice, groupChat.slice, etc.    â”‚
â”‚  - Persistent storage with localStorage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Business Logic Layer           â”‚
â”‚        (Services: 93 files)             â”‚
â”‚  - APIçµ±åˆ, ãƒ¡ãƒ¢ãƒªç®¡ç†, ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ   â”‚
â”‚  - æ„Ÿæƒ…åˆ†æ, ãƒˆãƒ©ãƒƒã‚«ãƒ¼ç®¡ç†              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Data Access Layer            â”‚
â”‚    (API Clients, Vector Store, etc.)    â”‚
â”‚  - Gemini API, OpenRouter API           â”‚
â”‚  - LocalStorage, Vector Database        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

**å¯†çµåˆã®å•é¡Œ**:
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç›´æ¥ã‚¹ãƒˆã‚¢ã«ä¾å­˜ (useAppStore: 191å›)
- ã‚µãƒ¼ãƒ“ã‚¹å±¤ãŒã‚¹ãƒˆã‚¢ã«ç›´æ¥ä¾å­˜
- å¾ªç’°å‚ç…§ã®ãƒªã‚¹ã‚¯

**æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:
- ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§ã‚¹ãƒˆã‚¢ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–
- ã‚µãƒ¼ãƒ“ã‚¹å±¤ã¯pure functionã«
- ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥

---

## æ”¹å–„ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### å…¨ä½“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Phase 1   â”‚   Phase 2   â”‚   Phase 3   â”‚
â”‚  (1-2é€±é–“)  â”‚  (2-4é€±é–“)  â”‚  (4-8é€±é–“)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‹å®‰å…¨æ€§    â”‚ æ§‹é€ æ”¹å–„    â”‚ å“è³ªå‘ä¸Š    â”‚
â”‚ ç·Šæ€¥ãƒ†ã‚¹ãƒˆ  â”‚ ãƒªãƒ•ã‚¡ã‚¯ã‚¿  â”‚ å®Œå…¨ãƒ†ã‚¹ãƒˆ  â”‚
â”‚ ãƒ­ã‚®ãƒ³ã‚°    â”‚ ESLintè¨­å®š  â”‚ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### KPIç›®æ¨™

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | ç¾çŠ¶ | Phase 1 | Phase 2 | Phase 3 |
|----------|------|---------|---------|---------|
| å‹å®‰å…¨æ€§ (anyå‹å‰Šæ¸›) | 347å› | 200å› | 100å› | 0å› |
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | <1% | 15% | 30% | 80% |
| console.logå‰Šæ¸› | 2015å› | 1000å› | 100å› | 0å› |
| æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º | 1543è¡Œ | - | 800è¡Œ | 500è¡Œ |
| ESLintã‚¨ãƒ©ãƒ¼ | - | 0 | 0 | 0 |

---

## Phase 1: ç·Šæ€¥å¯¾å¿œ

**æœŸé–“**: 1-2é€±é–“
**å„ªå…ˆåº¦**: ğŸ”´ CRITICAL

### ç›®æ¨™

1. å‹å®‰å…¨æ€§ã®åŸºç›¤æ§‹ç¯‰
2. ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆè¿½åŠ 
3. ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ã®æ•´ç†

### ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

#### 1.1 å‹å®‰å…¨æ€§ã®æ”¹å–„ (æ¨å®š: 3-5æ—¥)

**é‡è¦åº¦é †ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ**:

```markdown
â–¡ message-send-handler.ts (10ç®‡æ‰€)
â–¡ MessageBubble.tsx (8ç®‡æ‰€)
â–¡ store/index.ts (7ç®‡æ‰€)
â–¡ ChatInterface.tsx (6ç®‡æ‰€)
â–¡ inspiration-service.ts (5ç®‡æ‰€)
â–¡ conversation-manager.ts (5ç®‡æ‰€)
â–¡ groupChat.slice.ts (4ç®‡æ‰€)
â–¡ message-sender.service.ts (4ç®‡æ‰€)
```

**å®Ÿè£…ã‚¬ã‚¤ãƒ‰**:

```typescript
// ========================================
// ãƒ‘ã‚¿ãƒ¼ãƒ³1: APIå¿œç­”ã®å‹å®‰å…¨åŒ–
// ========================================

// âŒ Before
async function fetchData() {
  const response = await fetch('/api/data');
  const data: any = await response.json();
  return data;
}

// âœ… After
interface APIResponse {
  content: string;
  usage?: {
    prompt_tokens: number;
    completion_tokens: number;
  };
}

function isValidAPIResponse(data: unknown): data is APIResponse {
  return (
    typeof data === 'object' &&
    data !== null &&
    'content' in data &&
    typeof (data as APIResponse).content === 'string'
  );
}

async function fetchData(): Promise<APIResponse> {
  const response = await fetch('/api/data');
  const data: unknown = await response.json();

  if (!isValidAPIResponse(data)) {
    throw new Error('Invalid API response format');
  }

  return data;
}

// ========================================
// ãƒ‘ã‚¿ãƒ¼ãƒ³2: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å‹å®‰å…¨åŒ–
// ========================================

// âŒ Before
const handleClick = (e: any) => {
  e.preventDefault();
  doSomething(e.target.value);
};

// âœ… After
const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
  e.preventDefault();
  const target = e.currentTarget;
  doSomething(target.value);
};

// ========================================
// ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®å‹å®‰å…¨åŒ–
// ========================================

// âŒ Before
function processData(data: any) {
  return data.map((item: any) => item.value);
}

// âœ… After
interface DataItem {
  value: string;
  timestamp: number;
}

function processData(data: DataItem[]): string[] {
  return data.map(item => item.value);
}

// ========================================
// ãƒ‘ã‚¿ãƒ¼ãƒ³4: Zustandã‚¹ãƒˆã‚¢ã®å‹å®‰å…¨åŒ–
// ========================================

// âŒ Before
set((state: any) => ({
  ...state,
  data: newData
}));

// âœ… After
set((state) => ({
  ...state,
  data: newData as DataType
}));

// ã¾ãŸã¯å‹ã‚¬ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
function isValidData(data: unknown): data is DataType {
  // æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯
}

if (isValidData(newData)) {
  set((state) => ({
    ...state,
    data: newData
  }));
}
```

#### 1.2 ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆè¿½åŠ  (æ¨å®š: 4-6æ—¥)

**å„ªå…ˆåº¦é †ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**:

```markdown
Priority 1: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
  â–¡ simple-api-manager-v2.test.ts
  â–¡ conversation-manager.test.ts
  â–¡ prompt-builder.service.test.ts
  â–¡ inspiration-service.test.ts (æ—¢å­˜ã‚’æ‹¡å¼µ)

Priority 2: çŠ¶æ…‹ç®¡ç†å±¤
  â–¡ chat.slice.test.ts
  â–¡ groupChat.slice.test.ts
  â–¡ character.slice.test.ts
  â–¡ settings.slice.test.ts

Priority 3: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å±¤
  â–¡ session-storage.service.test.ts (æ—¢å­˜ã‚’æ‹¡å¼µ)
  â–¡ time-formatters.test.ts (æ—¢å­˜ã‚’æ‹¡å¼µ)
  â–¡ variable-replacer.test.ts
```

**ãƒ†ã‚¹ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**:

```typescript
// ========================================
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ1: ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®ãƒ†ã‚¹ãƒˆ
// ========================================
// File: src/services/__tests__/simple-api-manager-v2.test.ts

import { describe, it, expect, vi, beforeEach } from 'vitest';
import { SimpleAPIManagerV2 } from '../simple-api-manager-v2';

describe('SimpleAPIManagerV2', () => {
  let manager: SimpleAPIManagerV2;

  beforeEach(() => {
    manager = new SimpleAPIManagerV2();
    vi.clearAllMocks();
  });

  describe('API Key Management', () => {
    it('should load API keys from localStorage', () => {
      // Arrange
      const mockApiKey = 'test-api-key';
      localStorage.setItem('ai-chat-v3-storage', JSON.stringify({
        state: { geminiApiKey: mockApiKey }
      }));

      // Act
      const newManager = new SimpleAPIManagerV2();

      // Assert
      expect(newManager['geminiApiKey']).toBe(mockApiKey);
    });

    it('should prioritize environment variables over localStorage', () => {
      // Arrange
      process.env.NEXT_PUBLIC_GEMINI_API_KEY = 'env-key';
      localStorage.setItem('ai-chat-v3-storage', JSON.stringify({
        state: { geminiApiKey: 'local-key' }
      }));

      // Act
      const newManager = new SimpleAPIManagerV2();

      // Assert
      expect(newManager['geminiApiKey']).toBe('env-key');
    });
  });

  describe('JSON Parsing', () => {
    it('should safely parse valid JSON', () => {
      // Arrange
      const validJson = '{"content": "test"}';

      // Act
      const result = manager['safeJsonParse'](validJson);

      // Assert
      expect(result).toEqual({ content: 'test' });
    });

    it('should handle invalid JSON gracefully', () => {
      // Arrange
      const invalidJson = '{content: "test"}'; // Missing quotes

      // Act & Assert
      expect(() => manager['safeJsonParse'](invalidJson)).toThrow();
    });
  });

  describe('API Configuration', () => {
    it('should update API config correctly', () => {
      // Arrange
      const newConfig = {
        temperature: 0.8,
        max_tokens: 2048
      };

      // Act
      manager.setAPIConfig(newConfig);

      // Assert
      expect(manager['currentConfig'].temperature).toBe(0.8);
      expect(manager['currentConfig'].max_tokens).toBe(2048);
    });
  });
});

// ========================================
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ2: Zustandã‚¹ãƒˆã‚¢ã®ãƒ†ã‚¹ãƒˆ
// ========================================
// File: src/store/slices/__tests__/chat.slice.test.ts

import { describe, it, expect, beforeEach } from 'vitest';
import { create } from 'zustand';
import { createChatSlice, ChatSlice } from '../chat.slice';

describe('ChatSlice', () => {
  let store: ReturnType<typeof create<ChatSlice>>;

  beforeEach(() => {
    store = create<ChatSlice>()(
      (set, get, api) => createChatSlice(set, get, api)
    );
  });

  describe('Session Management', () => {
    it('should create a new session', async () => {
      // Arrange
      const character = {
        id: 'test-char',
        name: 'Test Character',
        // ... other required fields
      };
      const persona = {
        id: 'test-persona',
        name: 'Test Persona',
        // ... other required fields
      };

      // Act
      const sessionId = await store.getState().createSession(character, persona);

      // Assert
      expect(sessionId).toBeDefined();
      expect(store.getState().sessions.has(sessionId)).toBe(true);
    });

    it('should set active session', () => {
      // Arrange
      const sessionId = 'test-session-id';

      // Act
      store.getState().setActiveSession(sessionId);

      // Assert
      expect(store.getState().active_session_id).toBe(sessionId);
    });
  });

  describe('Message Operations', () => {
    it('should add message to session', () => {
      // Arrange
      const sessionId = 'test-session';
      const message = {
        id: 'msg-1',
        role: 'user' as const,
        content: 'Test message',
        timestamp: Date.now()
      };

      // Act
      store.getState().addMessageToSession(sessionId, message);

      // Assert
      const session = store.getState().sessions.get(sessionId);
      expect(session?.messages).toContainEqual(message);
    });
  });
});

// ========================================
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ3: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
// ========================================
// File: src/components/chat/__tests__/MessageBubble.test.tsx

import { describe, it, expect, vi } from 'vitest';
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { MessageBubble } from '../MessageBubble';

describe('MessageBubble', () => {
  const defaultProps = {
    message: {
      id: 'msg-1',
      role: 'assistant' as const,
      content: 'Test message',
      timestamp: Date.now()
    },
    isStreaming: false,
    onRegenerate: vi.fn(),
    onContinue: vi.fn()
  };

  it('should render message content', () => {
    render(<MessageBubble {...defaultProps} />);
    expect(screen.getByText('Test message')).toBeInTheDocument();
  });

  it('should call onRegenerate when regenerate button is clicked', async () => {
    const user = userEvent.setup();
    render(<MessageBubble {...defaultProps} />);

    const regenerateButton = screen.getByLabelText('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å†ç”Ÿæˆ');
    await user.click(regenerateButton);

    expect(defaultProps.onRegenerate).toHaveBeenCalledTimes(1);
  });

  it('should not show action buttons while streaming', () => {
    render(<MessageBubble {...defaultProps} isStreaming={true} />);

    expect(screen.queryByLabelText('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å†ç”Ÿæˆ')).not.toBeInTheDocument();
  });
});
```

#### 1.3 ãƒ­ã‚®ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆ (æ¨å®š: 2-3æ—¥)

**å®Ÿè£…ã‚¬ã‚¤ãƒ‰**:

```typescript
// ========================================
// File: src/utils/logger.ts
// ========================================

type LogLevel = 'debug' | 'info' | 'warn' | 'error';

interface LoggerConfig {
  level: LogLevel;
  enableConsole: boolean;
  enableRemote: boolean;
  remoteEndpoint?: string;
}

class Logger {
  private config: LoggerConfig;
  private readonly isDevelopment: boolean;

  constructor(config?: Partial<LoggerConfig>) {
    this.isDevelopment = process.env.NODE_ENV === 'development';
    this.config = {
      level: config?.level || (this.isDevelopment ? 'debug' : 'warn'),
      enableConsole: config?.enableConsole ?? this.isDevelopment,
      enableRemote: config?.enableRemote ?? !this.isDevelopment,
      remoteEndpoint: config?.remoteEndpoint
    };
  }

  debug(message: string, meta?: Record<string, unknown>): void {
    if (this.shouldLog('debug')) {
      this.log('debug', message, meta);
    }
  }

  info(message: string, meta?: Record<string, unknown>): void {
    if (this.shouldLog('info')) {
      this.log('info', message, meta);
    }
  }

  warn(message: string, meta?: Record<string, unknown>): void {
    if (this.shouldLog('warn')) {
      this.log('warn', message, meta);
    }
  }

  error(message: string, error?: Error, meta?: Record<string, unknown>): void {
    if (this.shouldLog('error')) {
      this.log('error', message, { ...meta, error: error?.stack });
    }
  }

  private shouldLog(level: LogLevel): boolean {
    const levels: LogLevel[] = ['debug', 'info', 'warn', 'error'];
    return levels.indexOf(level) >= levels.indexOf(this.config.level);
  }

  private log(level: LogLevel, message: string, meta?: Record<string, unknown>): void {
    const logEntry = {
      timestamp: new Date().toISOString(),
      level,
      message,
      meta
    };

    if (this.config.enableConsole) {
      const consoleMethod = level === 'debug' ? 'log' : level;
      console[consoleMethod](`[${level.toUpperCase()}]`, message, meta);
    }

    if (this.config.enableRemote && this.config.remoteEndpoint) {
      // æœ¬ç•ªç’°å¢ƒã§ã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ­ã‚®ãƒ³ã‚°
      this.sendToRemote(logEntry);
    }
  }

  private async sendToRemote(logEntry: unknown): Promise<void> {
    try {
      await fetch(this.config.remoteEndpoint!, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(logEntry)
      });
    } catch (error) {
      // ãƒªãƒ¢ãƒ¼ãƒˆãƒ­ã‚®ãƒ³ã‚°å¤±æ•—ã¯ç„¡è¦–
    }
  }
}

export const logger = new Logger();

// ========================================
// ä½¿ç”¨ä¾‹: console.logã®ç½®ãæ›ãˆ
// ========================================

// âŒ Before
console.log('User logged in:', userId);
console.error('Failed to fetch data:', error);

// âœ… After
import { logger } from '@/utils/logger';

logger.info('User logged in', { userId });
logger.error('Failed to fetch data', error);
```

**ç§»è¡Œè¨ˆç”»**:

```bash
# Step 1: console.logã‚’æ®µéšçš„ã«ç½®ãæ›ãˆ
grep -r "console.log" src/ | wc -l  # ç¾çŠ¶ç¢ºèª

# Step 2: é«˜é »åº¦ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å„ªå…ˆçš„ã«ç§»è¡Œ
# - APIçµ±åˆå±¤
# - çŠ¶æ…‹ç®¡ç†å±¤
# - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

# Step 3: ESLintãƒ«ãƒ¼ãƒ«ã§æ–°è¦è¿½åŠ ã‚’é˜²æ­¢
# .eslintrc.json ã«è¿½åŠ :
{
  "rules": {
    "no-console": ["warn", { "allow": ["warn", "error"] }]
  }
}
```

### Phase 1 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```markdown
å‹å®‰å…¨æ€§:
  â–¡ ä¸»è¦10ãƒ•ã‚¡ã‚¤ãƒ«ã®`any`å‹ã‚’å‰Šæ¸› (347 â†’ 200)
  â–¡ å‹ã‚¬ãƒ¼ãƒ‰é–¢æ•°ã‚’å®Ÿè£…
  â–¡ APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®šç¾©ã‚’è¿½åŠ 

ãƒ†ã‚¹ãƒˆ:
  â–¡ 8ã¤ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
  â–¡ ã‚«ãƒãƒ¬ãƒƒã‚¸15%é”æˆ
  â–¡ CIãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ

ãƒ­ã‚®ãƒ³ã‚°:
  â–¡ Loggerã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…
  â–¡ ä¸»è¦ã‚µãƒ¼ãƒ“ã‚¹ã§console.logã‚’ç½®ãæ›ãˆ (2015 â†’ 1000)
  â–¡ ç’°å¢ƒå¤‰æ•°ãƒ™ãƒ¼ã‚¹ã®ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡
```

---

## Phase 2: æ§‹é€ æ”¹å–„

**æœŸé–“**: 2-4é€±é–“
**å„ªå…ˆåº¦**: ğŸŸ¡ HIGH

### ç›®æ¨™

1. å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
2. ESLint + Prettierè¨­å®š
3. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸30%é”æˆ

### ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

#### 2.1 å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° (æ¨å®š: 6-8æ—¥)

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:

```markdown
â–¡ conversation-manager.ts (1,543è¡Œ â†’ 3ãƒ•ã‚¡ã‚¤ãƒ«)
â–¡ groupChat.slice.ts (1,472è¡Œ â†’ 3ãƒ•ã‚¡ã‚¤ãƒ«)
â–¡ ChatInterface.tsx (1,255è¡Œ â†’ 4ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
â–¡ MessageBubble.tsx (1,165è¡Œ â†’ 3ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
â–¡ prompt-builder.service.ts (981è¡Œ â†’ 3ãƒ•ã‚¡ã‚¤ãƒ«)
```

**ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¾‹**:

```typescript
// ========================================
// Example 1: conversation-manager.ts ã®åˆ†å‰²
// ========================================

// å…ƒãƒ•ã‚¡ã‚¤ãƒ« (1,543è¡Œ)
// src/services/memory/conversation-manager.ts

// â†“ åˆ†å‰²å¾Œ â†“

// src/services/memory/conversation-manager/core.ts
export class ConversationManagerCore {
  private vectorStore: VectorStore;
  private memoryLayers: MemoryLayerManager;

  constructor(initialMessages: UnifiedMessage[]) {
    this.vectorStore = new VectorStore();
    this.memoryLayers = new MemoryLayerManager();
  }

  public updateMemoryLimits(limits: MemoryLimits): void {
    // ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯
  }
}

// src/services/memory/conversation-manager/memory-integration.ts
export class MemoryIntegration {
  constructor(private core: ConversationManagerCore) {}

  public async getRelevantMemories(query: string): Promise<MemoryCard[]> {
    // ãƒ¡ãƒ¢ãƒªçµ±åˆãƒ­ã‚¸ãƒƒã‚¯
  }
}

// src/services/memory/conversation-manager/prompt-generation.ts
export class PromptGeneration {
  constructor(
    private core: ConversationManagerCore,
    private memoryIntegration: MemoryIntegration
  ) {}

  public async generatePrompt(context: ConversationContext): Promise<string> {
    // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
  }
}

// src/services/memory/conversation-manager/index.ts
export class ConversationManager {
  private core: ConversationManagerCore;
  private memoryIntegration: MemoryIntegration;
  private promptGeneration: PromptGeneration;

  constructor(initialMessages: UnifiedMessage[]) {
    this.core = new ConversationManagerCore(initialMessages);
    this.memoryIntegration = new MemoryIntegration(this.core);
    this.promptGeneration = new PromptGeneration(
      this.core,
      this.memoryIntegration
    );
  }

  // å…¬é–‹APIã¯å¤‰æ›´ãªã—ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰
  public async generatePrompt(context: ConversationContext): Promise<string> {
    return this.promptGeneration.generatePrompt(context);
  }
}

// ========================================
// Example 2: ChatInterface.tsx ã®åˆ†å‰²
// ========================================

// å…ƒãƒ•ã‚¡ã‚¤ãƒ« (1,255è¡Œ)
// src/components/chat/ChatInterface.tsx

// â†“ åˆ†å‰²å¾Œ â†“

// src/components/chat/ChatInterface/ChatHeader.tsx
export function ChatHeader({
  character,
  onSettingsClick
}: ChatHeaderProps) {
  return (
    <header className="chat-header">
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ */}
    </header>
  );
}

// src/components/chat/ChatInterface/ChatBody.tsx
export function ChatBody({
  messages,
  isStreaming
}: ChatBodyProps) {
  return (
    <div className="chat-body">
      {messages.map(msg => (
        <MessageBubble key={msg.id} message={msg} />
      ))}
    </div>
  );
}

// src/components/chat/ChatInterface/ChatInput.tsx
export function ChatInput({
  onSend,
  disabled
}: ChatInputProps) {
  const [input, setInput] = useState('');

  return (
    <div className="chat-input">
      {/* å…¥åŠ›ãƒ­ã‚¸ãƒƒã‚¯ */}
    </div>
  );
}

// src/components/chat/ChatInterface/useChatLogic.ts
export function useChatLogic() {
  const messages = useAppStore(state => state.messages);
  const sendMessage = useAppStore(state => state.sendMessage);

  const handleSend = useCallback((content: string) => {
    sendMessage(content);
  }, [sendMessage]);

  return { messages, handleSend };
}

// src/components/chat/ChatInterface/index.tsx (ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
export function ChatInterface() {
  const { messages, handleSend } = useChatLogic();
  const { character } = useCharacter();

  return (
    <div className="chat-interface">
      <ChatHeader character={character} onSettingsClick={handleSettings} />
      <ChatBody messages={messages} isStreaming={isStreaming} />
      <ChatInput onSend={handleSend} disabled={isGenerating} />
    </div>
  );
}
```

#### 2.2 ESLint + Prettierè¨­å®š (æ¨å®š: 1-2æ—¥)

**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**:

```json
// ========================================
// File: .eslintrc.json
// ========================================
{
  "extends": [
    "next/core-web-vitals",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking",
    "prettier"
  ],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "project": "./tsconfig.json"
  },
  "plugins": ["@typescript-eslint"],
  "rules": {
    // å‹å®‰å…¨æ€§
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/no-unsafe-assignment": "warn",
    "@typescript-eslint/no-unsafe-member-access": "warn",
    "@typescript-eslint/no-unsafe-call": "warn",
    "@typescript-eslint/no-unsafe-return": "warn",

    // ã‚³ãƒ¼ãƒ‰å“è³ª
    "@typescript-eslint/no-unused-vars": ["warn", {
      "argsIgnorePattern": "^_",
      "varsIgnorePattern": "^_"
    }],
    "no-console": ["warn", { "allow": ["warn", "error"] }],
    "complexity": ["warn", 15],
    "max-lines": ["warn", 500],
    "max-lines-per-function": ["warn", { "max": 100, "skipBlankLines": true }],

    // React
    "react-hooks/exhaustive-deps": "warn",
    "react/jsx-no-leaked-render": "error"
  }
}

// ========================================
// File: .prettierrc.json
// ========================================
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100,
  "arrowParens": "avoid"
}

// ========================================
// File: package.json (scriptsè¿½åŠ )
// ========================================
{
  "scripts": {
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "format": "prettier --write \"src/**/*.{ts,tsx,json,md}\"",
    "type-check": "tsc --noEmit"
  }
}
```

#### 2.3 ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸30%é”æˆ (æ¨å®š: 5-7æ—¥)

**è¿½åŠ ãƒ†ã‚¹ãƒˆä¸€è¦§**:

```markdown
ã‚µãƒ¼ãƒ“ã‚¹å±¤:
  â–¡ progressive-prompt-builder.service.test.ts
  â–¡ context-management.service.test.ts
  â–¡ memory/vector-store.test.ts
  â–¡ memory/memory-layer-manager.test.ts
  â–¡ emotion/BaseEmotionAnalyzer.test.ts
  â–¡ tracker/tracker-manager.test.ts

ã‚¹ãƒˆã‚¢å±¤:
  â–¡ memory.slice.test.ts
  â–¡ persona.slice.test.ts
  â–¡ tracker.slice.test.ts
  â–¡ settings.slice.test.ts

ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å±¤:
  â–¡ text-formatter.test.ts
  â–¡ variable-replacer.test.ts
  â–¡ uuid.test.ts

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå±¤ (å„ªå…ˆ):
  â–¡ MessageInput.test.tsx
  â–¡ ChatHeader.test.tsx
  â–¡ QuickSettingsPanel.test.tsx
```

### Phase 2 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```markdown
ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°:
  â–¡ 5ã¤ã®å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²å®Œäº†
  â–¡ æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º 800è¡Œä»¥ä¸‹
  â–¡ æ—¢å­˜æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª

ã‚³ãƒ¼ãƒ‰å“è³ª:
  â–¡ ESLintè¨­å®šå®Œäº†ã€ã‚¨ãƒ©ãƒ¼0ä»¶
  â–¡ Prettierè¨­å®šå®Œäº†
  â–¡ pre-commit hookè¨­å®š (husky)

ãƒ†ã‚¹ãƒˆ:
  â–¡ 20ä»¥ä¸Šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ 
  â–¡ ã‚«ãƒãƒ¬ãƒƒã‚¸30%é”æˆ
  â–¡ CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
```

---

## Phase 3: å“è³ªå‘ä¸Š

**æœŸé–“**: 4-8é€±é–“
**å„ªå…ˆåº¦**: ğŸŸ¢ MEDIUM

### ç›®æ¨™

1. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%é”æˆ
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

### ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

#### 3.1 å®Œå…¨ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ (æ¨å®š: 10-15æ—¥)

**ç›®æ¨™**: å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ

```markdown
æ®‹ã‚Šã®ã‚µãƒ¼ãƒ“ã‚¹å±¤:
  â–¡ api/gemini-client.test.ts
  â–¡ api/vector-search.test.ts
  â–¡ api/emotion-analysis.test.ts
  â–¡ image-generation/sd-image-generator.test.ts
  â–¡ mem0/character-service.test.ts
  â–¡ tts/safari-tts-manager.test.ts

æ®‹ã‚Šã®ã‚¹ãƒˆã‚¢å±¤:
  â–¡ history.slice.test.ts
  â–¡ suggestion.slice.test.ts
  â–¡ ui.slice.test.ts

å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå±¤ (é‡è¦åº¦é †):
  â–¡ GroupChatInterface.test.tsx
  â–¡ CharacterGallery.test.tsx
  â–¡ MemoryGallery.test.tsx
  â–¡ SettingsModal.test.tsx
  â–¡ (ãã®ä»–å…¨97ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)

E2Eãƒ†ã‚¹ãƒˆæ‹¡å¼µ:
  â–¡ critical-user-flows.spec.ts
  â–¡ cross-browser-compatibility.spec.ts
  â–¡ accessibility.spec.ts
```

#### 3.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– (æ¨å®š: 5-7æ—¥)

```typescript
// ========================================
// æœ€é©åŒ–1: React.memo ã®é©ç”¨
// ========================================

// Before
export function MessageBubble({ message, onRegenerate }: Props) {
  // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
}

// After
export const MessageBubble = React.memo(function MessageBubble({
  message,
  onRegenerate
}: Props) {
  // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
}, (prevProps, nextProps) => {
  // ã‚«ã‚¹ã‚¿ãƒ æ¯”è¼ƒé–¢æ•°
  return prevProps.message.id === nextProps.message.id &&
         prevProps.message.content === nextProps.message.content;
});

// ========================================
// æœ€é©åŒ–2: useCallback ã®é©ç”¨
// ========================================

// Before
function ChatInterface() {
  const handleSend = (content: string) => {
    sendMessage(content);
  };

  return <ChatInput onSend={handleSend} />;
}

// After
function ChatInterface() {
  const handleSend = useCallback((content: string) => {
    sendMessage(content);
  }, [sendMessage]);

  return <ChatInput onSend={handleSend} />;
}

// ========================================
// æœ€é©åŒ–3: useMemo ã®é©ç”¨
// ========================================

// Before
function MessageList({ messages }: Props) {
  const filteredMessages = messages.filter(m => !m.hidden);

  return (
    <div>
      {filteredMessages.map(m => <MessageBubble key={m.id} message={m} />)}
    </div>
  );
}

// After
function MessageList({ messages }: Props) {
  const filteredMessages = useMemo(
    () => messages.filter(m => !m.hidden),
    [messages]
  );

  return (
    <div>
      {filteredMessages.map(m => <MessageBubble key={m.id} message={m} />)}
    </div>
  );
}

// ========================================
// æœ€é©åŒ–4: é…å»¶ãƒ­ãƒ¼ãƒ‰ (React.lazy)
// ========================================

// Before
import { SettingsModal } from './SettingsModal';

// After
const SettingsModal = React.lazy(() => import('./SettingsModal'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <SettingsModal />
    </Suspense>
  );
}

// ========================================
// æœ€é©åŒ–5: ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›
// ========================================

// next.config.ts
export default {
  webpack: (config) => {
    config.optimization.splitChunks = {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          priority: -10
        }
      }
    };
    return config;
  }
};
```

#### 3.3 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ (æ¨å®š: 3-5æ—¥)

```markdown
ä½œæˆã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
  â–¡ ARCHITECTURE.md - ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
  â–¡ API_REFERENCE.md - å†…éƒ¨APIä»•æ§˜
  â–¡ DEVELOPMENT_GUIDE.md - é–‹ç™ºè€…å‘ã‘ã‚¬ã‚¤ãƒ‰
  â–¡ TESTING_GUIDE.md - ãƒ†ã‚¹ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰
  â–¡ DEPLOYMENT_GUIDE.md - ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
  â–¡ TROUBLESHOOTING.md - ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

æ›´æ–°ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
  â–¡ README.md - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ã‚’æœ€æ–°åŒ–
  â–¡ CONTRIBUTING.md - è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
  â–¡ CHANGELOG.md - å¤‰æ›´å±¥æ­´
```

### Phase 3 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```markdown
ãƒ†ã‚¹ãƒˆ:
  â–¡ ã‚«ãƒãƒ¬ãƒƒã‚¸80%é”æˆ
  â–¡ å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆå®Œäº†
  â–¡ E2Eãƒ†ã‚¹ãƒˆæ‹¡å……
  â–¡ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆå°å…¥

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:
  â–¡ Lighthouseã‚¹ã‚³ã‚¢ 90ä»¥ä¸Š
  â–¡ ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º 30%å‰Šæ¸›
  â–¡ åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚é–“ 2ç§’ä»¥å†…

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
  â–¡ 7ã¤ã®ä¸»è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
  â–¡ ã‚³ãƒ¼ãƒ‰ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
  â–¡ JSDocå½¢å¼ã®APIæ–‡æ›¸
```

---

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -D \
  @typescript-eslint/eslint-plugin \
  @typescript-eslint/parser \
  eslint-config-prettier \
  prettier \
  husky \
  lint-staged

# 2. Huskyã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npx husky install
npx husky add .husky/pre-commit "npx lint-staged"

# 3. lint-stagedè¨­å®š
# package.json ã«è¿½åŠ :
{
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md}": [
      "prettier --write"
    ]
  }
}
```

### å‹å®‰å…¨åŒ–ã®æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

```typescript
// ========================================
// Step 1: å‹å®šç¾©ã®ä½œæˆ
// ========================================
// File: src/types/api/responses.types.ts

export interface OpenRouterResponse {
  id: string;
  model: string;
  choices: Array<{
    message: {
      role: 'assistant';
      content: string;
    };
    finish_reason: string;
  }>;
  usage?: {
    prompt_tokens: number;
    completion_tokens: number;
    total_tokens: number;
  };
}

// ========================================
// Step 2: å‹ã‚¬ãƒ¼ãƒ‰ã®å®Ÿè£…
// ========================================
// File: src/utils/type-guards.ts

export function isOpenRouterResponse(
  data: unknown
): data is OpenRouterResponse {
  if (typeof data !== 'object' || data === null) {
    return false;
  }

  const response = data as OpenRouterResponse;

  return (
    typeof response.id === 'string' &&
    typeof response.model === 'string' &&
    Array.isArray(response.choices) &&
    response.choices.length > 0 &&
    typeof response.choices[0].message.content === 'string'
  );
}

// ========================================
// Step 3: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ®µéšçš„ç½®ãæ›ãˆ
// ========================================

// Phase 1: unknown + å‹ã‚¬ãƒ¼ãƒ‰
const data: unknown = await response.json();
if (isOpenRouterResponse(data)) {
  return data.choices[0].message.content;
}

// Phase 2: å°‚ç”¨é–¢æ•°ã§å‹å®‰å…¨åŒ–
async function fetchOpenRouterResponse(
  url: string
): Promise<OpenRouterResponse> {
  const response = await fetch(url);
  const data: unknown = await response.json();

  if (!isOpenRouterResponse(data)) {
    throw new TypeError('Invalid OpenRouter response format');
  }

  return data;
}
```

### ãƒ†ã‚¹ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

```typescript
// ========================================
// ãƒ†ã‚¹ãƒˆã®åŸºæœ¬æ§‹é€ 
// ========================================

describe('ComponentName ã¾ãŸã¯ FunctionName', () => {
  // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  beforeEach(() => {
    // å„ãƒ†ã‚¹ãƒˆå‰ã®æº–å‚™
  });

  afterEach(() => {
    // å„ãƒ†ã‚¹ãƒˆå¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  });

  // æ©Ÿèƒ½ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
  describe('Feature 1', () => {
    it('should do something correctly', () => {
      // Arrange (æº–å‚™)
      const input = 'test';

      // Act (å®Ÿè¡Œ)
      const result = functionUnderTest(input);

      // Assert (æ¤œè¨¼)
      expect(result).toBe('expected');
    });

    it('should handle edge case', () => {
      // ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('Feature 2', () => {
    // æ¬¡ã®æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
  });
});

// ========================================
// ãƒ¢ãƒƒã‚¯ã®ä½œæˆ
// ========================================

// 1. é–¢æ•°ã®ãƒ¢ãƒƒã‚¯
const mockFunction = vi.fn();
mockFunction.mockReturnValue('mocked value');

// 2. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ¢ãƒƒã‚¯
vi.mock('@/services/api-client', () => ({
  apiClient: {
    post: vi.fn().mockResolvedValue({ data: 'test' })
  }
}));

// 3. Zustandã‚¹ãƒˆã‚¢ã®ãƒ¢ãƒƒã‚¯
vi.mock('@/store', () => ({
  useAppStore: vi.fn((selector) => selector({
    messages: [],
    sendMessage: vi.fn()
  }))
}));

// ========================================
// éåŒæœŸå‡¦ç†ã®ãƒ†ã‚¹ãƒˆ
// ========================================

it('should handle async operation', async () => {
  const promise = asyncFunction();

  await expect(promise).resolves.toBe('expected value');
});

it('should handle async error', async () => {
  const promise = asyncFunctionThatThrows();

  await expect(promise).rejects.toThrow('Error message');
});
```

---

## æ¤œè¨¼æ–¹æ³•

### å‹å®‰å…¨æ€§ã®æ¤œè¨¼

```bash
# TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
npm run type-check

# ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å‹ãƒã‚§ãƒƒã‚¯
npx tsc --noEmit src/services/simple-api-manager-v2.ts

# anyå‹ã®ä½¿ç”¨ç®‡æ‰€ã‚’ç¢ºèª
grep -r ": any" src/ | wc -l

# ç›®æ¨™å€¤ã¨æ¯”è¼ƒ
# Phase 1: 200ä»¥ä¸‹
# Phase 2: 100ä»¥ä¸‹
# Phase 3: 0
```

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®æ¤œè¨¼

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npm run test:coverage

# ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤ãƒã‚§ãƒƒã‚¯
# package.json ã«è¿½åŠ :
{
  "vitest": {
    "coverage": {
      "provider": "v8",
      "reporter": ["text", "json", "html"],
      "statements": 80,
      "branches": 80,
      "functions": 80,
      "lines": 80
    }
  }
}
```

### ã‚³ãƒ¼ãƒ‰å“è³ªã®æ¤œè¨¼

```bash
# ESLintãƒã‚§ãƒƒã‚¯
npm run lint

# è¤‡é›‘åº¦ãƒã‚§ãƒƒã‚¯
npx eslint src/ --ext .ts,.tsx --max-warnings 0

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
npm run format -- --check
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ¤œè¨¼

```bash
# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºåˆ†æ
npm run analyze

# Lighthouse CI
npm run perf:lighthouse

# ç›®æ¨™å€¤:
# - Performance: 90+
# - Accessibility: 100
# - Best Practices: 95+
# - SEO: 100
```

---

## æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³å¼•ãç¶™ã

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```markdown
æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹éš›ã®æ‰‹é †:

1. ç¾çŠ¶ç¢ºèª
   - [ ] `git status` ã§å¤‰æ›´å†…å®¹ç¢ºèª
   - [ ] `git log -5` ã§æœ€è¿‘ã®ã‚³ãƒŸãƒƒãƒˆç¢ºèª
   - [ ] ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®Phaseé€²æ—ç¢ºèª

2. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   - [ ] `npm install` ã§ä¾å­˜é–¢ä¿‚æ›´æ–°
   - [ ] `npm run type-check` ã§å‹ã‚¨ãƒ©ãƒ¼ç¢ºèª
   - [ ] `npm run lint` ã§ã‚³ãƒ¼ãƒ‰å“è³ªç¢ºèª

3. ã‚¿ã‚¹ã‚¯é¸æŠ
   - [ ] Phase 1, 2, 3ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‹ã‚‰æœªå®Œäº†ã‚¿ã‚¹ã‚¯ç‰¹å®š
   - [ ] å„ªå…ˆåº¦ã®é«˜ã„ã‚¿ã‚¹ã‚¯ã‹ã‚‰ç€æ‰‹

4. å®Ÿè£…é–‹å§‹
   - [ ] è©²å½“Phaseã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§
   - [ ] ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º(TDD)ã§å®Ÿè£…
   - [ ] ã‚³ãƒŸãƒƒãƒˆå‰ã«æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
```

### é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«

```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ :
  src/
    â”œâ”€â”€ services/         # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤ (93ãƒ•ã‚¡ã‚¤ãƒ«)
    â”œâ”€â”€ store/           # çŠ¶æ…‹ç®¡ç†å±¤ (20ã‚¹ãƒ©ã‚¤ã‚¹)
    â”œâ”€â”€ components/      # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (97ãƒ•ã‚¡ã‚¤ãƒ«)
    â”œâ”€â”€ hooks/           # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (16ãƒ•ã‚¡ã‚¤ãƒ«)
    â”œâ”€â”€ types/           # å‹å®šç¾© (26ãƒ•ã‚¡ã‚¤ãƒ«)
    â””â”€â”€ utils/           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

é‡è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«:
  - tsconfig.json      # TypeScriptè¨­å®š
  - .eslintrc.json     # ESLintè¨­å®š (Phase 2ã§è¿½åŠ )
  - .prettierrc.json   # Prettierè¨­å®š (Phase 2ã§è¿½åŠ )
  - package.json       # npm scripts
  - vitest.config.ts   # ãƒ†ã‚¹ãƒˆè¨­å®š

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
  - claudedocs/CODE_QUALITY_IMPROVEMENT_MASTER_PLAN.md (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«)
  - claudedocs/PHASE3_IMPLEMENTATION_GUIDE.md
  - ğŸ¯ AI Chat V3 å®Œå…¨é–‹ç™ºã‚¬ã‚¤ãƒ‰.md
```

### ã‚ˆãã‚ã‚‹è³ªå•

**Q1: ã©ã®Phaseã‹ã‚‰é–‹å§‹ã™ã¹ãã‹ï¼Ÿ**

A: ç¾åœ¨ã®çŠ¶æ³ã«å¿œã˜ã¦é¸æŠ:
- å‹ã‚¨ãƒ©ãƒ¼ãŒé »ç™º â†’ Phase 1ã®å‹å®‰å…¨æ€§æ”¹å–„
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒå¿…è¦ â†’ Phase 2ã®æ§‹é€ æ”¹å–„
- å®‰å®šç¨¼åƒä¸­ â†’ Phase 3ã®å“è³ªå‘ä¸Š

**Q2: æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã¯ï¼Ÿ**

A: å…¨ã¦ã®Phaseã§å¾Œæ–¹äº’æ›æ€§ã‚’ç¶­æŒ:
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¯å†…éƒ¨å®Ÿè£…ã®ã¿å¤‰æ›´
- å…¬é–‹APIã¯å¤‰æ›´ã—ãªã„
- ãƒ†ã‚¹ãƒˆã§å‹•ä½œç¢ºèªã‚’å¾¹åº•

**Q3: æ¨å¥¨ã•ã‚Œã‚‹ä½œæ¥­æ™‚é–“é…åˆ†ã¯ï¼Ÿ**

A:
- Phase 1: 1-2é€±é–“ (ç·Šæ€¥åº¦é«˜)
- Phase 2: 2-4é€±é–“ (æ§‹é€ æ”¹å–„)
- Phase 3: 4-8é€±é–“ (å“è³ªå‘ä¸Š)

å„Phaseã¯ä¸¦è¡Œå®Ÿæ–½å¯èƒ½ï¼ˆç•°ãªã‚‹é ˜åŸŸã‚’æ‹…å½“ã™ã‚‹å ´åˆï¼‰

---

## ä»˜éŒ²

### A. ESLintãƒ«ãƒ¼ãƒ«è©³ç´°

```json
{
  "rules": {
    // å‹å®‰å…¨æ€§ï¼ˆæœ€å„ªå…ˆï¼‰
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/no-unsafe-assignment": "warn",
    "@typescript-eslint/no-unsafe-member-access": "warn",

    // ã‚³ãƒ¼ãƒ‰è¤‡é›‘åº¦
    "complexity": ["warn", 15],              // å¾ªç’°çš„è¤‡é›‘åº¦15ä»¥ä¸‹
    "max-lines": ["warn", 500],              // ãƒ•ã‚¡ã‚¤ãƒ«500è¡Œä»¥ä¸‹
    "max-lines-per-function": ["warn", 100], // é–¢æ•°100è¡Œä»¥ä¸‹
    "max-depth": ["warn", 4],                // ãƒã‚¹ãƒˆ4éšå±¤ä»¥ä¸‹

    // å‘½åè¦å‰‡
    "@typescript-eslint/naming-convention": [
      "error",
      {
        "selector": "interface",
        "format": ["PascalCase"]
      },
      {
        "selector": "typeAlias",
        "format": ["PascalCase"]
      }
    ],

    // ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰
    "no-console": ["warn", { "allow": ["warn", "error"] }],
    "no-debugger": "error",

    // React
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn"
  }
}
```

### B. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | Phase 1 | Phase 2 | Phase 3 |
|---------|---------|---------|---------|
| ã‚µãƒ¼ãƒ“ã‚¹å±¤ | 20% | 40% | 90% |
| ã‚¹ãƒˆã‚¢å±¤ | 10% | 30% | 85% |
| ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å±¤ | 30% | 60% | 95% |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå±¤ | 0% | 15% | 70% |
| **å…¨ä½“** | **15%** | **30%** | **80%** |

### C. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | ç¾çŠ¶ | ç›®æ¨™ |
|----------|------|------|
| åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚é–“ | 3.5s | 2.0s |
| Time to Interactive | 4.2s | 2.5s |
| ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º (gzip) | 450KB | 300KB |
| Lighthouse Performance | 75 | 90+ |
| Lighthouse Accessibility | 92 | 100 |

---

## ã¾ã¨ã‚

ã“ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ©ãƒ³ã¯ã€AI Chat V3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å“è³ªã‚’ä½“ç³»çš„ã«å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®åŒ…æ‹¬çš„ãªãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã§ã™ã€‚

**æˆåŠŸã®éµ**:
1. æ®µéšçš„ãªå®Ÿæ–½ï¼ˆä¸€åº¦ã«å…¨ã¦ã‚’ã‚„ã‚‰ãªã„ï¼‰
2. ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ã®å¾¹åº•
3. ç¶™ç¶šçš„ãªã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
4. å®šæœŸçš„ãªé€²æ—ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ**:
- ãƒã‚°ç™ºç”Ÿç‡: -60%
- é–‹ç™ºé€Ÿåº¦: +40%
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®‰å…¨æ€§: +80%
- ãƒãƒ¼ãƒ ç”Ÿç”£æ€§: +50%

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: Phase 1ã®å‹å®‰å…¨æ€§æ”¹å–„ã‹ã‚‰ç€æ‰‹ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

**é€£çµ¡å…ˆ**: è³ªå•ã‚„å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€GitHubã®Issueã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚

**æœ€çµ‚æ›´æ–°**: 2025-10-30
